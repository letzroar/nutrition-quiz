<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Free 60-Second Nutrition Quiz</title>
  <style>
    :root{
      --primary:#0F766E;
      --primary-dark:#0D5F58;
      --primary-light:rgba(15,118,110,.08);
      --primary-border:rgba(15,118,110,.25);
      --bg:#F3F4F6;
      --card:#FFFFFF;
      --text:#111827;
      --muted:#6B7280;
      --border:#E5E7EB;
      --protein:#0D5F58;
      --carbs:#0F766E;
      --fats:#5EEAD4;
      --radius:14px;
      --shadow:0 4px 24px rgba(0,0,0,.07);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);background:var(--bg);min-height:100vh;line-height:1.5;
    }
    .wrap{max-width:720px;margin:0 auto;padding:24px 16px 140px}
    .hero{text-align:center;padding:40px 0 10px}
    .hero h1{font-size:28px;font-weight:900;color:var(--primary-dark);margin-bottom:8px;line-height:1.25}
    .hero p{color:var(--muted);font-size:16px;max-width:480px;margin:0 auto}
    .lang-row{display:flex;justify-content:flex-end;margin-bottom:8px}
    .lang-row select{background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:6px 10px;font-size:13px;outline:none;cursor:pointer}
    .lang-row select:focus{border-color:var(--primary)}
    .progressWrap{background:var(--border);border-radius:999px;height:8px;margin:20px 0 24px;overflow:hidden}
    .progressBar{height:100%;border-radius:999px;background:var(--primary);transition:width .5s ease;width:0%}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .cardBody{padding:20px}
    .q-section{display:none;opacity:0;transform:translateY(12px);transition:opacity .4s ease,transform .4s ease;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid var(--border)}
    .q-section.visible{display:block}
    .q-section.animate-in{opacity:1;transform:translateY(0)}
    .q-section:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}
    h2{font-size:15px;font-weight:800;color:var(--primary-dark);margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .field{flex:1 1 240px;display:flex;flex-direction:column;gap:5px;margin:6px 0}
    label{font-size:13px;font-weight:600;color:var(--muted)}
    input,select,textarea{width:100%;background:var(--card);color:var(--text);border:1px solid var(--border);border-radius:10px;padding:11px 12px;font-size:15px;outline:none;transition:border-color .15s ease,box-shadow .15s ease}
    input:focus,select:focus,textarea:focus{border-color:var(--primary);box-shadow:0 0 0 3px rgba(15,118,110,.12)}
    textarea{min-height:80px;resize:vertical}
    .help{background:var(--primary-light);border:1px solid var(--primary-border);padding:10px 12px;border-radius:10px;color:var(--muted);font-size:12px;line-height:1.5;margin-top:4px}
    .note{font-size:12px;color:var(--muted);margin:4px 0 0}
    .checks{display:grid;grid-template-columns:1fr;gap:6px;background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:12px}
    @media(min-width:600px){.checks{grid-template-columns:1fr 1fr}}
    .check{display:flex;align-items:center;gap:8px;color:var(--text);font-size:13px}
    .check input[type="checkbox"]{width:16px;height:16px;accent-color:var(--primary)}
    .bfGrid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media(max-width:600px){.bfGrid{grid-template-columns:1fr}}
    .bfCard{text-align:left;border-radius:12px;padding:10px;border:2px solid var(--border);background:var(--card);cursor:pointer;transition:border-color .15s,box-shadow .15s,transform .08s}
    .bfCard:hover{border-color:rgba(15,118,110,.4)}
    .bfCard:active{transform:translateY(1px)}
    .bfImgWrap{width:100%;aspect-ratio:16/10;border-radius:10px;overflow:hidden;border:1px solid var(--border);background:var(--bg);display:flex;align-items:center;justify-content:center}
    .bfImgWrap img{width:100%;height:100%;object-fit:cover;display:block}
    .bfTop{display:flex;align-items:baseline;justify-content:space-between;gap:8px;margin-top:8px}
    .bfTitle{font-weight:900;color:var(--text)}
    .bfTag{font-size:11px;color:var(--muted);border:1px solid var(--border);background:var(--bg);border-radius:999px;padding:4px 8px}
    .bfDesc{margin-top:4px;color:var(--muted);font-size:12px;line-height:1.4}
    .bfCard.isSelected{border-color:var(--primary);box-shadow:0 0 0 3px rgba(15,118,110,.15);background:var(--primary-light)}
    .bfCard.isHidden{display:none}
    .bfPrompt{padding:16px;text-align:center;color:var(--muted);background:var(--bg);border:1px solid var(--border);border-radius:10px}
    button,.btn{border:none;border-radius:10px;padding:12px 20px;cursor:pointer;font-weight:800;font-size:15px;transition:transform .08s,filter .12s,box-shadow .12s}
    button:active,.btn:active{transform:translateY(1px)}
    .btn-primary{background:var(--primary);color:#fff;box-shadow:0 4px 16px rgba(15,118,110,.25);width:100%}
    .btn-primary:hover{filter:brightness(1.08)}
    .btn-primary:disabled{opacity:.5;cursor:not-allowed}
    .btn-ghost{background:transparent;color:var(--primary);border:1px solid var(--primary-border);padding:10px 16px}
    .btn-ghost:hover{background:var(--primary-light)}
    .invalid{border-color:var(--primary-dark)!important;box-shadow:0 0 0 3px rgba(15,118,110,.18)!important}
    .invalid-label{color:var(--primary-dark)!important}
    .bfGrid.invalidGrid{border-radius:12px;box-shadow:0 0 0 3px rgba(15,118,110,.18);padding:4px}
    .errBanner{display:none;margin:0 0 12px;padding:10px 12px;border-radius:10px;border:1px solid var(--primary-border);background:var(--primary-light);color:var(--primary-dark);line-height:1.4;font-size:13px}
    .readyBox{text-align:center;padding:20px 0 10px}
    .readyBox h2{font-size:22px;color:var(--primary-dark);text-transform:none;letter-spacing:0;margin-bottom:12px}
    .readyBox .bullets{text-align:left;display:inline-block;margin:0 auto 20px;color:var(--text);font-size:14px;line-height:1.8}
    .readyBox .bullets li::marker{color:var(--primary)}
    .grid2{display:grid;grid-template-columns:1fr;gap:12px}
    @media(min-width:600px){.grid2{grid-template-columns:1fr 1fr}.span2{grid-column:1/-1}}
    .kpi{background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:12px}
    .kpi .small{color:var(--muted);font-size:12px}
    .kpi b{display:block;font-size:20px;margin-top:4px;color:var(--text)}
    .kpi.target{border-color:var(--primary);background:var(--primary-light)}
    .kpi.target b{color:var(--primary-dark)}
    .pill{display:inline-flex;gap:6px;align-items:center;border:1px solid var(--border);padding:6px 10px;border-radius:999px;margin:4px 4px 0 0;font-size:13px;background:var(--bg)}
    .pill b{color:var(--primary-dark);font-weight:800}
    .pill.protein{border-color:rgba(13,95,88,.4);background:rgba(13,95,88,.06)}
    .pill.protein b{color:#0D5F58}
    .pill.carbs{border-color:rgba(15,118,110,.4);background:rgba(15,118,110,.06)}
    .pill.carbs b{color:#0F766E}
    .pill.fats{border-color:rgba(94,234,212,.6);background:rgba(94,234,212,.08)}
    .pill.fats b{color:#0D7C6F}
    .hr{height:1px;background:var(--border);margin:16px 0}
    .list{margin:6px 0 0;padding-left:18px;color:var(--text);line-height:1.7;font-size:14px}
    .list li::marker{color:var(--primary)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;white-space:pre-wrap;word-break:break-word;font-size:12px;color:var(--text)}
    .drop{margin-top:10px;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:var(--bg)}
    .dropHead{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;cursor:pointer;user-select:none;color:var(--primary-dark);font-weight:800;font-size:14px}
    .dropBody{display:none;padding:10px 12px 12px;color:var(--muted);font-size:13px;line-height:1.5;border-top:1px solid var(--border)}
    .drop.open .dropBody{display:block}
    .mealsBox{border:1px solid var(--primary-border);background:var(--primary-light);border-radius:12px;padding:14px}
    .mealsTitle{display:flex;align-items:center;gap:8px;font-weight:900;color:var(--primary-dark);margin:0 0 8px}
    .mealsTitle span{display:inline-flex;padding:4px 8px;border-radius:999px;border:1px solid var(--primary-border);background:rgba(15,118,110,.1);color:var(--primary-dark);font-size:11px;font-weight:800}
    .donutRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
    .donutCard{flex:1 1 300px;border:1px solid var(--border);border-radius:12px;padding:12px;background:var(--bg)}
    .donutHead{display:flex;align-items:baseline;justify-content:space-between;gap:10px}
    .donutHead b{font-size:13px;color:var(--text)}
    .donutHead span{font-size:12px;color:var(--muted)}
    .donutWrap{display:flex;align-items:center;gap:12px;margin-top:8px}
    .legend{display:flex;flex-direction:column;gap:6px;font-size:12px;color:var(--muted);min-width:200px}
    .legItem{display:flex;align-items:center;gap:6px}
    .swatch{width:10px;height:10px;border-radius:3px}
    .swProtein{background:var(--protein)}
    .swCarbs{background:var(--carbs)}
    .swFats{background:var(--fats)}
    .warn{color:var(--primary-dark);background:var(--primary-light);border:1px solid var(--primary-border);padding:12px;border-radius:12px;margin-bottom:12px;line-height:1.45;font-size:13px}
    .adjustNote{color:var(--muted);background:var(--bg);border:1px solid var(--border);padding:12px;border-radius:12px;margin:12px 0;line-height:1.5;font-size:13px}
    .ctaBox{border:1px solid var(--primary-border);background:var(--primary-light);border-radius:12px;padding:18px;margin:16px 0}
    .ctaItem{margin-bottom:14px}
    .ctaItem:last-child{margin-bottom:0}
    .ctaTitle{font-weight:800;color:var(--text);margin-bottom:6px;font-size:14px}
    .ctaDesc{color:var(--muted);font-size:13px;margin-bottom:8px;line-height:1.4}
    .ctaDivider{height:1px;background:var(--border);margin:12px 0}
    .ctaBtn{display:inline-flex;align-items:center;gap:6px;padding:10px 18px;border-radius:10px;font-weight:800;font-size:14px;text-decoration:none;transition:transform .08s,filter .12s;cursor:pointer}
    .ctaBtn:hover{filter:brightness(1.08);transform:translateY(-1px)}
    .ctaBtn:active{transform:translateY(1px)}
    .ctaBtn.ctaPrimary{background:var(--primary);color:#fff;border:none;box-shadow:0 4px 16px rgba(15,118,110,.2)}
    .ctaBtn.ctaSecondary{background:transparent;color:var(--primary);border:1px solid var(--primary-border)}
    .stickyFloat{position:fixed;bottom:16px;right:16px;z-index:9999;display:flex;align-items:center;gap:10px;max-width:300px;padding:12px 16px;border-radius:14px;border:1px solid var(--primary-border);background:var(--card);box-shadow:0 8px 32px rgba(0,0,0,.12);text-decoration:none;color:var(--text);cursor:pointer;transition:transform .12s,box-shadow .12s}
    .stickyFloat:hover{transform:translateY(-2px);box-shadow:0 12px 40px rgba(15,118,110,.15)}
    .stickyIcon{flex-shrink:0;width:38px;height:38px;border-radius:10px;background:var(--primary);display:flex;align-items:center;justify-content:center;font-size:18px}
    .stickyText{font-size:12px;line-height:1.3;color:var(--muted)}
    .stickyText b{display:block;font-size:13px;font-weight:800;color:var(--text);margin-bottom:1px}
    @media(max-width:480px){.stickyFloat{bottom:10px;right:10px;left:10px;max-width:none}}
    .section-group-title{font-size:13px;font-weight:800;color:var(--primary);text-transform:uppercase;letter-spacing:.5px;margin:8px 0 4px;padding-top:8px}
    .nudgeBar{margin-top:14px;padding:14px 16px;border-radius:12px;border:1px solid var(--primary-border);background:var(--primary-light);color:var(--primary-dark);font-size:14px;font-weight:600;line-height:1.5;cursor:pointer;transition:box-shadow .2s ease,transform .1s ease;display:none}
    .nudgeBar:hover{box-shadow:0 4px 16px rgba(15,118,110,.15);transform:translateY(-1px)}
    .nudgeBar .nudgeCount{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:var(--primary);color:#fff;font-size:12px;font-weight:900;margin-right:8px;vertical-align:middle}
    .nudgeBar .nudgeFields{display:block;margin-top:6px;font-size:12px;font-weight:400;color:var(--muted)}
    .nudgeBar .nudgeFields span{display:inline-block;background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:2px 8px;margin:2px 4px 2px 0;font-size:12px;color:var(--primary-dark)}
    .unanswered{border-color:var(--primary)!important;box-shadow:0 0 0 3px rgba(15,118,110,.12)!important;animation:pulseField 2s ease-in-out infinite}
    @keyframes pulseField{0%,100%{box-shadow:0 0 0 3px rgba(15,118,110,.08)}50%{box-shadow:0 0 0 5px rgba(15,118,110,.18)}}
    .unanswered-label{color:var(--primary-dark)!important;font-weight:700!important}
    .email-error-msg{display:none;margin-top:4px;padding:8px 12px;border-radius:8px;background:#FEF2F2;border:1px solid #FECACA;color:#DC2626;font-size:13px;font-weight:600;line-height:1.4}
    .email-error-msg.show{display:block}
    .email-invalid-border{border-color:#DC2626!important;box-shadow:0 0 0 3px rgba(220,38,38,.15)!important}
    .email-invalid-label{color:#DC2626!important}
  </style>
</head>
<body>
<div class="wrap">
  <div class="lang-row">
    <select id="langSelect">
      <option value="en">English</option>
      <option value="fr">FranÃ§ais</option>
      <option value="de">Deutsch</option>
    </select>
  </div>
  <div class="hero">
    <h1 data-i18n="hero.title">Free 60â€‘Second Nutrition Quiz</h1>
    <p data-i18n="hero.sub">Answer a few questions, get Calories, Macros & a 2â€‘week plan.</p>
  </div>
  <div class="progressWrap"><div class="progressBar" id="progressBar"></div></div>
  <div class="card">
    <div class="cardBody">
      <div class="errBanner" id="errBanner"></div>
      <form id="quizForm" novalidate>

        <div class="q-section visible" data-section="age" id="sec-age">
          <div class="field">
            <label for="age" data-i18n="s1.age">Age (years)</label>
            <input id="age" type="number" min="13" max="90" name="age" required />
          </div>
        </div>

        <div class="q-section" data-section="gender" id="sec-gender">
          <div class="field">
            <label for="gender" data-i18n="s1.gender">Gender</label>
            <select id="gender" name="gender" required>
              <option value="" data-i18n="s1.gender.select">Select</option>
              <option value="male" data-i18n="s1.gender.male">Male</option>
              <option value="female" data-i18n="s1.gender.female">Female</option>
            </select>
          </div>
        </div>

        <div class="q-section" data-section="goal" id="sec-goal">
          <div class="field">
            <label for="goal" data-i18n="s1.goal">Goal</label>
            <select id="goal" name="goal" required>
              <option value="" data-i18n="common.select">Select</option>
              <option value="lose" data-i18n="s1.goal.lose">Lose fat</option>
              <option value="maintain" data-i18n="s1.goal.maintain">Recomposition (Lose fat / build muscle)</option>
              <option value="gain" data-i18n="s1.goal.gain">Build lean muscle mass</option>
            </select>
          </div>
        </div>

        <div class="q-section" data-section="details" id="sec-details">
          <div class="section-group-title" data-i18n="s1.title">Personal Data</div>
          <div class="row">
            <div class="field">
              <label for="heightCm" data-i18n="s1.height">Height (cm)</label>
              <input id="heightCm" type="number" min="120" max="230" name="heightCm" required />
            </div>
            <div class="field">
              <label for="weightKg" data-i18n="s1.weight">Weight (kg)</label>
              <input id="weightKg" type="number" min="35" max="250" step="0.1" name="weightKg" required />
            </div>
          </div>
          <div class="row">
            <div class="field">
              <label for="activity" data-i18n="s1.activity">Activity level</label>
              <select id="activity" name="activity" required>
                <option value="" data-i18n="s1.activity.select">Select</option>
                <option value="sedentary" data-i18n="s1.activity.sedentary">Sedentary</option>
                <option value="light" data-i18n="s1.activity.light">Lightly active</option>
                <option value="moderate" data-i18n="s1.activity.moderate">Moderately active</option>
                <option value="very" data-i18n="s1.activity.very">Very active</option>
              </select>
              <div class="help" data-i18n="s1.activity.help"><b>Examples:</b><br/><b>Sedentary:</b> desk job, little walking.<br/><b>Light:</b> desk job + walks, 1â€“3Ã—/week.<br/><b>Moderate:</b> active + 3â€“5Ã—/week.<br/><b>Very active:</b> physical job + frequent training.</div>
            </div>
          </div>
          <div class="row">
            <div class="field">
              <label for="steps" data-i18n="s1.steps">Average daily steps</label>
              <select id="steps" name="steps" required>
                <option value="" data-i18n="common.select">Select</option>
                <option value="none" data-i18n="s1.steps.none">I don't track / very low</option>
                <option value="2k" data-i18n="s1.steps.2k">~2,000/day</option>
                <option value="lt4k" data-i18n="s1.steps.lt4k">&lt; 4,000/day</option>
                <option value="4to8k" data-i18n="s1.steps.4to8k">4,000â€“8,000/day</option>
                <option value="8to12k" data-i18n="s1.steps.8to12k">8,000â€“12,000/day</option>
                <option value="gt12k" data-i18n="s1.steps.gt12k">&gt; 12,000/day</option>
              </select>
            </div>
            <div class="field">
              <label for="sleep" data-i18n="s1.sleep">Sleep per night</label>
              <select id="sleep" name="sleep" required>
                <option value="" data-i18n="common.select">Select</option>
                <option value="lt4" data-i18n="s1.sleep.lt4">&lt; 4h</option>
                <option value="4to6" data-i18n="s1.sleep.4to6">4â€“6h</option>
                <option value="6to8" data-i18n="s1.sleep.6to8">6â€“8h</option>
                <option value="8plus" data-i18n="s1.sleep.8plus">8h+</option>
              </select>
            </div>
          </div>
          <div class="field" id="bfFieldWrap">
            <label data-i18n="s1.bfVisual.label">Body fat estimate (visual)</label>
            <input type="hidden" id="bfMin" name="bfMin" required />
            <input type="hidden" id="bfMax" name="bfMax" required />
            <input type="hidden" id="bfRangeLabel" name="bfRangeLabel" required />
            <div class="bfPrompt" id="bfPrompt" data-i18n="s1.bfVisual.selectGender">Please select your gender first.</div>
            <div class="bfGrid" id="bfGrid" role="radiogroup" style="display:none">
              <button type="button" class="bfCard" data-gender="male" data-min="1" data-max="7" data-label="1â€“7%"><div class="bfImgWrap"><img src="img/bf/male_1_7.png" alt="Male 1â€“7%"/></div><div class="bfTop"><div class="bfTitle">1â€“7%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.1_7.desc">Competition level.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="8" data-max="10" data-label="8â€“10%"><div class="bfImgWrap"><img src="img/bf/male_8_10.png" alt="Male 8â€“10%"/></div><div class="bfTop"><div class="bfTitle">8â€“10%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.8_10.desc">Very lean.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="11" data-max="12" data-label="11â€“12%"><div class="bfImgWrap"><img src="img/bf/male_11_12.png" alt="Male 11â€“12%"/></div><div class="bfTop"><div class="bfTitle">11â€“12%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.11_12.desc">Lean.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="13" data-max="15" data-label="13â€“15%"><div class="bfImgWrap"><img src="img/bf/male_13_15.png" alt="Male 13â€“15%"/></div><div class="bfTop"><div class="bfTitle">13â€“15%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.13_15.desc">Athletic.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="16" data-max="19" data-label="16â€“19%"><div class="bfImgWrap"><img src="img/bf/male_16_19.png" alt="Male 16â€“19%"/></div><div class="bfTop"><div class="bfTitle">16â€“19%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.16_19.desc">Fit.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="20" data-max="24" data-label="20â€“24%"><div class="bfImgWrap"><img src="img/bf/male_20_24.png" alt="Male 20â€“24%"/></div><div class="bfTop"><div class="bfTitle">20â€“24%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.20_24.desc">Average.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="25" data-max="30" data-label="25â€“30%"><div class="bfImgWrap"><img src="img/bf/male_25_30.png" alt="Male 25â€“30%"/></div><div class="bfTop"><div class="bfTitle">25â€“30%</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.25_30.desc">Soft midsection.</div></button>
              <button type="button" class="bfCard" data-gender="male" data-min="35" data-max="40" data-label="35â€“40%+"><div class="bfImgWrap"><img src="img/bf/male_35_40.png" alt="Male 35â€“40%+"/></div><div class="bfTop"><div class="bfTitle">35â€“40%+</div><div class="bfTag" data-i18n="s1.gender.male">Male</div></div><div class="bfDesc" data-i18n="s1.bf.male.35_40.desc">Clear fat accumulation.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="10" data-max="12" data-label="10â€“12%"><div class="bfImgWrap"><img src="img/bf/female_10_12.png" alt="Female 10â€“12%"/></div><div class="bfTop"><div class="bfTitle">10â€“12%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.10_12.desc">Competition level.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="15" data-max="17" data-label="15â€“17%"><div class="bfImgWrap"><img src="img/bf/female_15_17.png" alt="Female 15â€“17%"/></div><div class="bfTop"><div class="bfTitle">15â€“17%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.15_17.desc">Very lean.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="18" data-max="20" data-label="18â€“20%"><div class="bfImgWrap"><img src="img/bf/female_18_20.png" alt="Female 18â€“20%"/></div><div class="bfTop"><div class="bfTitle">18â€“20%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.18_20.desc">Athletic/fit.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="21" data-max="23" data-label="21â€“23%"><div class="bfImgWrap"><img src="img/bf/female_21_23.png" alt="Female 21â€“23%"/></div><div class="bfTop"><div class="bfTitle">21â€“23%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.21_23.desc">Fit.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="24" data-max="26" data-label="24â€“26%"><div class="bfImgWrap"><img src="img/bf/female_24_26.png" alt="Female 24â€“26%"/></div><div class="bfTop"><div class="bfTitle">24â€“26%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.24_26.desc">Average/healthy.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="27" data-max="29" data-label="27â€“29%"><div class="bfImgWrap"><img src="img/bf/female_27_29.png" alt="Female 27â€“29%"/></div><div class="bfTop"><div class="bfTitle">27â€“29%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.27_29.desc">Softer shape.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="30" data-max="35" data-label="30â€“35%"><div class="bfImgWrap"><img src="img/bf/female_30_35.png" alt="Female 30â€“35%"/></div><div class="bfTop"><div class="bfTitle">30â€“35%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.30_35.desc">Clear fat accumulation.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="36" data-max="40" data-label="36â€“40%"><div class="bfImgWrap"><img src="img/bf/female_36_40.png" alt="Female 36â€“40%"/></div><div class="bfTop"><div class="bfTitle">36â€“40%</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.36_40.desc">Significant fat.</div></button>
              <button type="button" class="bfCard" data-gender="female" data-min="50" data-max="55" data-label="50%+"><div class="bfImgWrap"><img src="img/bf/female_50_plus.png" alt="Female 50%+"/></div><div class="bfTop"><div class="bfTitle">50%+</div><div class="bfTag" data-i18n="s1.gender.female">Female</div></div><div class="bfDesc" data-i18n="s1.bf.female.50_plus.desc">High body fat.</div></button>
            </div>
            <div class="help" data-i18n="s1.bfVisual.help">Choose the closest match. If between two, pick the higher range.</div>
          </div>
          <div class="row">
            <div class="field">
              <label for="experience" data-i18n="s1.experience">Training experience</label>
              <select id="experience" name="experience" required>
                <option value="" data-i18n="s1.experience.select">Select</option>
                <option value="none" data-i18n="s1.experience.none">None</option>
                <option value="beginner" data-i18n="s1.experience.beginner">Beginner (0â€“2 yrs)</option>
                <option value="intermediate" data-i18n="s1.experience.intermediate">Intermediate (2â€“5 yrs)</option>
                <option value="advanced" data-i18n="s1.experience.advanced">Advanced (5+ yrs)</option>
              </select>
            </div>
            <div class="field">
              <label for="trainingNow" data-i18n="s1.trainingNow">Currently training?</label>
              <select id="trainingNow" name="trainingNow" required>
                <option value="" data-i18n="s1.trainingNow.select">Select</option>
                <option value="no" data-i18n="s1.no">No</option>
                <option value="yes" data-i18n="s1.yes">Yes</option>
              </select>
            </div>
          </div>
          <div class="field" id="trainedBeforeWrap" style="display:none">
            <label for="trainedBefore" data-i18n="s1.trainedBefore">Have you trained before?</label>
            <select id="trainedBefore" name="trainedBefore">
              <option value="" data-i18n="common.select">Select</option>
              <option value="no" data-i18n="common.no">No</option>
              <option value="yes" data-i18n="common.yes">Yes</option>
            </select>
          </div>
          <div class="field" id="trainingTypeWrap" style="display:none">
            <label for="trainingType" data-i18n="s1.trainingType">Training type</label>
            <select id="trainingType" name="trainingType">
              <option value="" data-i18n="common.select">Select</option>
              <option value="strength" data-i18n="s1.trainingType.strength">Strength / weights</option>
              <option value="cardio" data-i18n="s1.trainingType.cardio">Cardio / endurance</option>
              <option value="mixed" data-i18n="s1.trainingType.mixed">Mixed</option>
              <option value="sport" data-i18n="s1.trainingType.sport">Sport-specific</option>
            </select>
          </div>
          <div class="field" id="trainingDetailsWrap" style="display:none">
            <label for="trainingDetails" data-i18n="s1.trainingDetails">What exactly do you do?</label>
            <input id="trainingDetails" name="trainingDetails" type="text" data-i18n-placeholder="s1.trainingDetails.ph" placeholder="e.g., football + gym, CrossFit, boxing..." />
          </div>
          <div class="field" id="sessionsWrap">
            <label for="sessionsPerWeek" data-i18n="s1.sessions">Sessions per week</label>
            <select id="sessionsPerWeek" name="sessionsPerWeek">
              <option value="" data-i18n="common.select">Select</option>
              <option value="0">0</option><option value="1-2">1â€“2</option><option value="3">3</option><option value="4">4</option><option value="5-6">5â€“6</option><option value="7">7+</option>
            </select>
          </div>
          <div class="nudgeBar" data-nudge-for="details"></div>
        </div>

        <div class="q-section" data-section="nutrition" id="sec-nutrition">
          <div class="section-group-title" data-i18n="s2.title">Nutrition & Eating Habits</div>
          <p class="note" style="margin-bottom:8px" data-i18n="s2.note">Choose what best matches your average week.</p>
          <div class="row">
            <div class="field">
              <label for="snacks" data-i18n="s2.snacks">Sugary snacks</label>
              <select id="snacks" name="snacks" required><option value="" data-i18n="common.select">Select</option><option value="none" data-i18n="common.none">None</option><option value="1" data-i18n="freq.1w">1Ã—/week</option><option value="2" data-i18n="freq.2w">2Ã—/week</option><option value="3-5" data-i18n="freq.3_5w">3â€“5Ã—/week</option><option value="daily" data-i18n="freq.daily">Daily</option></select>
            </div>
            <div class="field">
              <label for="sodas" data-i18n="s2.sodas">Sodas / sweetened drinks</label>
              <select id="sodas" name="sodas" required><option value="" data-i18n="common.select">Select</option><option value="none" data-i18n="common.none">None</option><option value="1" data-i18n="freq.1w">1Ã—/week</option><option value="2" data-i18n="freq.2w">2Ã—/week</option><option value="3-5" data-i18n="freq.3_5w">3â€“5Ã—/week</option><option value="daily" data-i18n="freq.daily">Daily</option></select>
            </div>
          </div>
          <div class="row">
            <div class="field">
              <label for="fastfood" data-i18n="s2.fastfood">Fast food / burgers</label>
              <select id="fastfood" name="fastfood" required><option value="" data-i18n="common.select">Select</option><option value="none" data-i18n="common.none">None</option><option value="1" data-i18n="freq.1w">1Ã—/week</option><option value="2" data-i18n="freq.2w">2Ã—/week</option><option value="3-5" data-i18n="freq.3_5w">3â€“5Ã—/week</option><option value="daily" data-i18n="freq.daily">Daily</option></select>
            </div>
            <div class="field">
              <label for="alcohol" data-i18n="s2.alcohol">Alcohol (frequency)</label>
              <select id="alcohol" name="alcohol" required><option value="" data-i18n="common.select">Select</option><option value="none" data-i18n="common.none">None</option><option value="1" data-i18n="freq.1w">1Ã—/week</option><option value="2" data-i18n="freq.2w">2Ã—/week</option><option value="3-4" data-i18n="freq.3_4w">3â€“4Ã—/week</option><option value="5+" data-i18n="freq.5w">5+Ã—/week</option><option value="daily" data-i18n="freq.daily">Daily</option></select>
            </div>
          </div>
          <div class="row">
            <div class="field">
              <label for="tracks" data-i18n="s2.tracks">Do you track calories?</label>
              <select id="tracks" name="tracks" required><option value="" data-i18n="common.select">Select</option><option value="no" data-i18n="common.no">No</option><option value="sometimes" data-i18n="common.sometimes">Sometimes</option><option value="yes" data-i18n="common.yes">Yes</option></select>
            </div>
            <div class="field">
              <label for="currentCals" data-i18n="s2.currentCals">Current daily calories (optional)</label>
              <input id="currentCals" type="number" min="800" max="6000" name="currentCals" data-i18n-placeholder="s2.currentCals.ph" placeholder="e.g., 2200" />
            </div>
          </div>
          <div class="nudgeBar" data-nudge-for="nutrition"></div>
        </div>

        <div class="q-section" data-section="diet" id="sec-diet">
          <div class="section-group-title" data-i18n="s3.title">Dietary Preferences & Constraints</div>
          <div class="field">
            <label for="diet" data-i18n="s3.diet">Diet type</label>
            <select id="diet" name="diet" required><option value="" data-i18n="common.select">Select</option><option value="omnivore" data-i18n="s3.diet.omnivore">Omnivore</option><option value="vegetarian" data-i18n="s3.diet.vegetarian">Vegetarian</option><option value="vegan" data-i18n="s3.diet.vegan">Vegan</option></select>
          </div>
          <div class="field">
            <label data-i18n="s3.allergies">Allergies / restrictions</label>
            <div class="checks">
              <label class="check"><input type="checkbox" name="allergies" value="milk"><span data-i18n="s3.allergy.milk">Milk (Dairy)</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="egg"><span data-i18n="s3.allergy.egg">Egg</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="peanut"><span data-i18n="s3.allergy.peanut">Peanut</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="treenuts"><span data-i18n="s3.allergy.treenuts">Tree nuts</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="soy"><span data-i18n="s3.allergy.soy">Soy</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="wheat"><span data-i18n="s3.allergy.wheat">Wheat</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="gluten"><span data-i18n="s3.allergy.gluten">Gluten</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="fish"><span data-i18n="s3.allergy.fish">Fish</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="shellfish"><span data-i18n="s3.allergy.shellfish">Shellfish</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="sesame"><span data-i18n="s3.allergy.sesame">Sesame</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="corn"><span data-i18n="s3.allergy.corn">Corn</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="mustard"><span data-i18n="s3.allergy.mustard">Mustard</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="celery"><span data-i18n="s3.allergy.celery">Celery</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="lupin"><span data-i18n="s3.allergy.lupin">Lupin</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="sulfites"><span data-i18n="s3.allergy.sulfites">Sulfites</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="fruits"><span data-i18n="s3.allergy.fruits">Fruits</span></label>
              <label class="check"><input type="checkbox" name="allergies" value="vegetables"><span data-i18n="s3.allergy.vegetables">Vegetables</span></label>
            </div>
          </div>
          <div class="field" id="produceAllergyWrap" style="display:none">
            <label for="produceAllergyDetails" data-i18n="s3.produce.details">Allergic to which fruits/vegetables?</label>
            <input id="produceAllergyDetails" name="produceAllergyDetails" type="text" data-i18n-placeholder="s3.produce.details.ph" placeholder="e.g., strawberries, tomatoes..." />
          </div>
          <div class="row">
            <div class="field">
              <label for="likes" data-i18n="s3.likes">Favourite foods</label>
              <textarea id="likes" name="likes" data-i18n-placeholder="s3.likes.ph" placeholder="e.g., pasta, curry, wraps, oats"></textarea>
            </div>
            <div class="field">
              <label for="dislikes" data-i18n="s3.dislikes">Foods you dislike / avoid</label>
              <textarea id="dislikes" name="dislikes" data-i18n-placeholder="s3.dislikes.ph" placeholder="e.g., mushrooms, tuna, eggs"></textarea>
            </div>
          </div>
          <div class="nudgeBar" data-nudge-for="diet"></div>
        </div>

        <div class="q-section" data-section="ready" id="sec-ready">
          <div class="readyBox">
            <h2 data-i18n="ready.title">Your Custom Calories & 2â€‘Week Plan is Ready</h2>
            <ul class="bullets">
              <li data-i18n="ready.b1">Your daily calorie target</li>
              <li data-i18n="ready.b2">Protein, carbs & fat breakdown</li>
              <li data-i18n="ready.b3">Example meals based on your preferences</li>
              <li data-i18n="ready.b4">2â€‘week action plan (training, steps, swaps)</li>
            </ul>
          </div>
          <div class="row">
            <div class="field">
              <label for="firstName" data-i18n="p.name">First name</label>
              <input id="firstName" type="text" name="firstName" required data-i18n-placeholder="p.name_ph" placeholder="e.g., Sarah" />
            </div>
            <div class="field">
              <label for="userEmail" data-i18n="p.email">Email</label>
              <input id="userEmail" type="email" name="userEmail" required data-i18n-placeholder="p.email_ph" placeholder="name@email.com" />
              <div class="email-error-msg" id="emailErrorMsg" data-i18n="err.invalidEmail">Please enter a valid email address (e.g. name@email.com)</div>
            </div>
          </div>
          <div class="field">
            <label for="country" data-i18n="p.country">Country</label>
            <select id="country" name="country">
              <option value="" data-i18n="p.country.select">Select</option>
              <option value="AF">Afghanistan</option><option value="AL">Albania</option><option value="DZ">Algeria</option><option value="AD">Andorra</option><option value="AO">Angola</option><option value="AG">Antigua and Barbuda</option><option value="AR">Argentina</option><option value="AM">Armenia</option><option value="AU">Australia</option><option value="AT">Austria</option><option value="AZ">Azerbaijan</option><option value="BS">Bahamas</option><option value="BH">Bahrain</option><option value="BD">Bangladesh</option><option value="BB">Barbados</option><option value="BY">Belarus</option><option value="BE">Belgium</option><option value="BZ">Belize</option><option value="BJ">Benin</option><option value="BT">Bhutan</option><option value="BO">Bolivia</option><option value="BA">Bosnia and Herzegovina</option><option value="BW">Botswana</option><option value="BR">Brazil</option><option value="BN">Brunei</option><option value="BG">Bulgaria</option><option value="BF">Burkina Faso</option><option value="BI">Burundi</option><option value="CV">Cabo Verde</option><option value="KH">Cambodia</option><option value="CM">Cameroon</option><option value="CA">Canada</option><option value="CF">Central African Republic</option><option value="TD">Chad</option><option value="CL">Chile</option><option value="CN">China</option><option value="CO">Colombia</option><option value="KM">Comoros</option><option value="CG">Congo</option><option value="CD">Congo (DRC)</option><option value="CR">Costa Rica</option><option value="CI">CÃ´te d'Ivoire</option><option value="HR">Croatia</option><option value="CU">Cuba</option><option value="CY">Cyprus</option><option value="CZ">Czech Republic</option><option value="DK">Denmark</option><option value="DJ">Djibouti</option><option value="DM">Dominica</option><option value="DO">Dominican Republic</option><option value="EC">Ecuador</option><option value="EG">Egypt</option><option value="SV">El Salvador</option><option value="GQ">Equatorial Guinea</option><option value="ER">Eritrea</option><option value="EE">Estonia</option><option value="SZ">Eswatini</option><option value="ET">Ethiopia</option><option value="FJ">Fiji</option><option value="FI">Finland</option><option value="FR">France</option><option value="GA">Gabon</option><option value="GM">Gambia</option><option value="GE">Georgia</option><option value="DE">Germany</option><option value="GH">Ghana</option><option value="GR">Greece</option><option value="GD">Grenada</option><option value="GT">Guatemala</option><option value="GN">Guinea</option><option value="GW">Guinea-Bissau</option><option value="GY">Guyana</option><option value="HT">Haiti</option><option value="HN">Honduras</option><option value="HU">Hungary</option><option value="IS">Iceland</option><option value="IN">India</option><option value="ID">Indonesia</option><option value="IR">Iran</option><option value="IQ">Iraq</option><option value="IE">Ireland</option><option value="IL">Israel</option><option value="IT">Italy</option><option value="JM">Jamaica</option><option value="JP">Japan</option><option value="JO">Jordan</option><option value="KZ">Kazakhstan</option><option value="KE">Kenya</option><option value="KI">Kiribati</option><option value="KP">Korea (North)</option><option value="KR">Korea (South)</option><option value="KW">Kuwait</option><option value="KG">Kyrgyzstan</option><option value="LA">Laos</option><option value="LV">Latvia</option><option value="LB">Lebanon</option><option value="LS">Lesotho</option><option value="LR">Liberia</option><option value="LY">Libya</option><option value="LI">Liechtenstein</option><option value="LT">Lithuania</option><option value="LU">Luxembourg</option><option value="MG">Madagascar</option><option value="MW">Malawi</option><option value="MY">Malaysia</option><option value="MV">Maldives</option><option value="ML">Mali</option><option value="MT">Malta</option><option value="MH">Marshall Islands</option><option value="MR">Mauritania</option><option value="MU">Mauritius</option><option value="MX">Mexico</option><option value="FM">Micronesia</option><option value="MD">Moldova</option><option value="MC">Monaco</option><option value="MN">Mongolia</option><option value="ME">Montenegro</option><option value="MA">Morocco</option><option value="MZ">Mozambique</option><option value="MM">Myanmar</option><option value="NA">Namibia</option><option value="NR">Nauru</option><option value="NP">Nepal</option><option value="NL">Netherlands</option><option value="NZ">New Zealand</option><option value="NI">Nicaragua</option><option value="NE">Niger</option><option value="NG">Nigeria</option><option value="MK">North Macedonia</option><option value="NO">Norway</option><option value="OM">Oman</option><option value="PK">Pakistan</option><option value="PW">Palau</option><option value="PS">Palestine</option><option value="PA">Panama</option><option value="PG">Papua New Guinea</option><option value="PY">Paraguay</option><option value="PE">Peru</option><option value="PH">Philippines</option><option value="PL">Poland</option><option value="PT">Portugal</option><option value="QA">Qatar</option><option value="RO">Romania</option><option value="RU">Russia</option><option value="RW">Rwanda</option><option value="KN">Saint Kitts and Nevis</option><option value="LC">Saint Lucia</option><option value="VC">Saint Vincent</option><option value="WS">Samoa</option><option value="SM">San Marino</option><option value="ST">SÃ£o TomÃ© and PrÃ­ncipe</option><option value="SA">Saudi Arabia</option><option value="SN">Senegal</option><option value="RS">Serbia</option><option value="SC">Seychelles</option><option value="SL">Sierra Leone</option><option value="SG">Singapore</option><option value="SK">Slovakia</option><option value="SI">Slovenia</option><option value="SB">Solomon Islands</option><option value="SO">Somalia</option><option value="ZA">South Africa</option><option value="SS">South Sudan</option><option value="ES">Spain</option><option value="LK">Sri Lanka</option><option value="SD">Sudan</option><option value="SR">Suriname</option><option value="SE">Sweden</option><option value="CH">Switzerland</option><option value="SY">Syria</option><option value="TW">Taiwan</option><option value="TJ">Tajikistan</option><option value="TZ">Tanzania</option><option value="TH">Thailand</option><option value="TL">Timor-Leste</option><option value="TG">Togo</option><option value="TO">Tonga</option><option value="TT">Trinidad and Tobago</option><option value="TN">Tunisia</option><option value="TR">Turkey</option><option value="TM">Turkmenistan</option><option value="TV">Tuvalu</option><option value="UG">Uganda</option><option value="UA">Ukraine</option><option value="AE">United Arab Emirates</option><option value="GB">United Kingdom</option><option value="US">United States</option><option value="UY">Uruguay</option><option value="UZ">Uzbekistan</option><option value="VU">Vanuatu</option><option value="VA">Vatican City</option><option value="VE">Venezuela</option><option value="VN">Vietnam</option><option value="YE">Yemen</option><option value="ZM">Zambia</option><option value="ZW">Zimbabwe</option>
            </select>
          </div>
          <div style="margin-top:16px">
            <button type="button" class="btn-primary" id="showPlanBtn" data-i18n="btn.showPlan">Show My Plan</button>
          </div>
        </div>

        <div class="q-section" data-section="results" id="sec-results">
          <div id="results"></div>
        </div>

      </form>
    </div>
  </div>
</div>

<a href="https://www.shop.letzroar.com/28-days-letz-roar-kickstart/" target="_blank" class="stickyFloat" id="stickyFloat">
  <span class="stickyIcon">ðŸ”¥</span>
  <span class="stickyText">
    <b data-i18n="sticky.title">28â€‘Day LÃ«t'z Roar Kickstart</b>
    <span data-i18n="sticky.desc">Earn your money back & Win LÃ«t'z Roar signature Hoodie â†’</span>
  </span>
</a>

<script>
/* =========================
   GOOGLE SHEETS TRACKING
   ========================= */
const GOOGLE_SCRIPT_URL='https://script.google.com/macros/s/AKfycbwai0sBu1k667wOjjUMQre6CY5wQdAWXwkSQuncb5daRrto-HXiXRGaydUIaeyPTbxh/exec';
function generateSessionId(){return'sess_'+Date.now()+'_'+Math.random().toString(36).substr(2,9)}
let sessionId=sessionStorage.getItem('quiz_session_id');
if(!sessionId){sessionId=generateSessionId();sessionStorage.setItem('quiz_session_id',sessionId)}
let userContactInfo={email:'',phone:''};
let ctaClicks={kickstart:false,skool:false,sendEmail:false,sendWhatsApp:false,sendResultsChecked:false};

function trackToGoogleSheets(status,stepReached,additionalData={}){
  const formData=getFormDataForTracking();
  const d={sessionId,status,stepReached,language:getLang(),userAgent:navigator.userAgent,contactEmail:userContactInfo.email,contactPhone:userContactInfo.phone,clickedKickstart:ctaClicks.kickstart,clickedSkool:ctaClicks.skool,clickedSendEmail:ctaClicks.sendEmail,clickedSendWhatsApp:ctaClicks.sendWhatsApp,wantsResults:ctaClicks.sendResultsChecked,...formData,...additionalData};
  fetch(GOOGLE_SCRIPT_URL,{method:'POST',mode:'no-cors',headers:{'Content-Type':'application/json'},body:JSON.stringify(d)}).catch(()=>{});
}
function trackCtaClick(ctaType){ctaClicks[ctaType]=true;trackToGoogleSheets('cta_click',currentRevealedIndex,{ctaClicked:ctaType,ctaClickTime:new Date().toISOString()})}
function trackContactInfo(type,value){if(type==='email')userContactInfo.email=value;else if(type==='phone')userContactInfo.phone=value;trackToGoogleSheets('contact_info_entered',currentRevealedIndex,{contactType:type,contactValue:value})}

function getFormDataForTracking(){
  const form=document.getElementById('quizForm');const fd=new FormData(form);const allergies=fd.getAll('allergies');const data=Object.fromEntries(fd.entries());data.allergies=allergies;
  return{firstName:data.firstName||'',userEmail:data.userEmail||'',country:data.country||'',age:data.age||'',gender:data.gender||'',heightCm:data.heightCm||'',weightKg:data.weightKg||'',bfRangeLabel:data.bfRangeLabel||'',activity:data.activity||'',experience:data.experience||'',trainingNow:data.trainingNow||'',trainedBefore:data.trainedBefore||'',trainingType:data.trainingType||'',trainingDetails:data.trainingDetails||'',sessionsPerWeek:data.sessionsPerWeek||'',steps:data.steps||'',sleep:data.sleep||'',goal:data.goal||'',snacks:data.snacks||'',sodas:data.sodas||'',fastfood:data.fastfood||'',alcohol:data.alcohol||'',tracks:data.tracks||'',currentCals:data.currentCals||'',diet:data.diet||'',allergies:allergies,likes:data.likes||'',dislikes:data.dislikes||''};
}

window.addEventListener('load',()=>{setTimeout(()=>{trackToGoogleSheets('started',0)},1000)});
window.addEventListener('beforeunload',()=>{
  const d={sessionId,status:currentRevealedIndex>=sectionOrder.length-1?'completed':'abandoned',stepReached:currentRevealedIndex,language:getLang(),userAgent:navigator.userAgent,contactEmail:userContactInfo.email,contactPhone:userContactInfo.phone,clickedKickstart:ctaClicks.kickstart,clickedSkool:ctaClicks.skool,clickedSendEmail:ctaClicks.sendEmail,clickedSendWhatsApp:ctaClicks.sendWhatsApp,wantsResults:ctaClicks.sendResultsChecked,...getFormDataForTracking()};
  if(navigator.sendBeacon)navigator.sendBeacon(GOOGLE_SCRIPT_URL,JSON.stringify(d));
});

function debounce(func,wait){let timeout;return function(...args){clearTimeout(timeout);timeout=setTimeout(()=>func(...args),wait)}}
const trackFieldChange=debounce(()=>{trackToGoogleSheets('in_progress',currentRevealedIndex)},2000);
document.querySelectorAll('#quizForm input,#quizForm select,#quizForm textarea').forEach(f=>{f.addEventListener('change',trackFieldChange);f.addEventListener('input',trackFieldChange)});

/* =========================
   I18N
   ========================= */
const I18N={
en:{
"lang.label":"Language",
"hero.title":"Free 60â€‘Second Nutrition Quiz",
"hero.sub":"Answer a few questions, get Calories, Macros & a 2â€‘week plan.",
"s1.title":"Personal Data",
"p.name":"First name","p.name_ph":"e.g., Sarah","p.email":"Email","p.email_ph":"name@email.com",
"p.country":"Country","p.country.select":"Select",
"s1.age":"Age (years)","s1.gender":"Gender","s1.gender.select":"Select","s1.gender.male":"Male","s1.gender.female":"Female",
"s1.height":"Height (cm)","s1.weight":"Weight (kg)",
"s1.bfVisual.label":"Body fat estimate (visual)","s1.bfVisual.selectGender":"Please select your gender first.","s1.bfVisual.help":"Choose the closest match. If between two, pick the higher range.",
"s1.bf.male.1_7.desc":"Competition level.","s1.bf.male.8_10.desc":"Very lean.","s1.bf.male.11_12.desc":"Lean.","s1.bf.male.13_15.desc":"Athletic.","s1.bf.male.16_19.desc":"Fit.","s1.bf.male.20_24.desc":"Average.","s1.bf.male.25_30.desc":"Soft midsection.","s1.bf.male.35_40.desc":"Clear fat accumulation.",
"s1.bf.female.10_12.desc":"Competition level.","s1.bf.female.15_17.desc":"Very lean.","s1.bf.female.18_20.desc":"Athletic/fit.","s1.bf.female.21_23.desc":"Fit.","s1.bf.female.24_26.desc":"Average/healthy.","s1.bf.female.27_29.desc":"Softer shape.","s1.bf.female.30_35.desc":"Clear fat accumulation.","s1.bf.female.36_40.desc":"Significant fat.","s1.bf.female.50_plus.desc":"High body fat.",
"s1.activity":"Activity level","s1.activity.select":"Select","s1.activity.sedentary":"Sedentary","s1.activity.light":"Lightly active","s1.activity.moderate":"Moderately active","s1.activity.very":"Very active",
"s1.activity.help":"<b>Examples:</b><br/><b>Sedentary:</b> desk job, little walking.<br/><b>Light:</b> desk job + walks, 1â€“3Ã—/week.<br/><b>Moderate:</b> active + 3â€“5Ã—/week.<br/><b>Very active:</b> physical job + frequent training.",
"s1.experience":"Training experience","s1.experience.select":"Select","s1.experience.none":"None","s1.experience.beginner":"Beginner (0â€“2 yrs)","s1.experience.intermediate":"Intermediate (2â€“5 yrs)","s1.experience.advanced":"Advanced (5+ yrs)",
"s1.trainingNow":"Currently training?","s1.trainingNow.select":"Select","s1.yes":"Yes","s1.no":"No",
"s1.trainedBefore":"Have you trained before?","s1.trainingType":"Training type","s1.trainingType.strength":"Strength / weights","s1.trainingType.cardio":"Cardio / endurance","s1.trainingType.mixed":"Mixed","s1.trainingType.sport":"Sport-specific",
"s1.trainingDetails":"What exactly do you do?","s1.trainingDetails.ph":"e.g., football + gym, CrossFit...",
"s1.sessions":"Sessions per week",
"s1.steps":"Average daily steps","s1.steps.none":"I don't track / very low","s1.steps.2k":"~2,000/day","s1.steps.lt4k":"< 4,000/day","s1.steps.4to8k":"4,000â€“8,000/day","s1.steps.8to12k":"8,000â€“12,000/day","s1.steps.gt12k":"> 12,000/day",
"s1.sleep":"Sleep per night","s1.sleep.lt4":"< 4h","s1.sleep.4to6":"4â€“6h","s1.sleep.6to8":"6â€“8h","s1.sleep.8plus":"8h+",
"s1.goal":"Goal","s1.goal.lose":"Lose fat","s1.goal.maintain":"Recomposition (Lose fat / build muscle)","s1.goal.gain":"Build lean muscle mass",
"s2.title":"Nutrition & Eating Habits","s2.note":"Choose what best matches your average week.",
"s2.snacks":"Sugary snacks","s2.sodas":"Sodas / sweetened drinks","s2.fastfood":"Fast food / burgers","s2.alcohol":"Alcohol (frequency)",
"s2.tracks":"Do you track calories?","s2.currentCals":"Current daily calories (optional)","s2.currentCals.required":"Current daily calories (required)","s2.currentCals.ph":"e.g., 2200",
"s3.title":"Dietary Preferences & Constraints","s3.diet":"Diet type","s3.diet.omnivore":"Omnivore","s3.diet.vegetarian":"Vegetarian","s3.diet.vegan":"Vegan",
"s3.allergies":"Allergies / restrictions",
"s3.allergy.milk":"Milk (Dairy)","s3.allergy.egg":"Egg","s3.allergy.peanut":"Peanut","s3.allergy.treenuts":"Tree nuts","s3.allergy.soy":"Soy","s3.allergy.wheat":"Wheat","s3.allergy.gluten":"Gluten","s3.allergy.fish":"Fish","s3.allergy.shellfish":"Shellfish","s3.allergy.sesame":"Sesame","s3.allergy.corn":"Corn","s3.allergy.mustard":"Mustard","s3.allergy.celery":"Celery","s3.allergy.lupin":"Lupin","s3.allergy.sulfites":"Sulfites","s3.allergy.fruits":"Fruits","s3.allergy.vegetables":"Vegetables",
"s3.produce.details":"Allergic to which fruits/vegetables?","s3.produce.details.ph":"e.g., strawberries, tomatoes...",
"s3.likes":"Favourite foods","s3.likes.ph":"e.g., pasta, curry, wraps","s3.dislikes":"Foods you dislike / avoid","s3.dislikes.ph":"e.g., mushrooms, tuna, eggs",
"common.select":"Select","common.none":"None","common.no":"No","common.yes":"Yes","common.sometimes":"Sometimes",
"freq.1w":"1Ã—/week","freq.2w":"2Ã—/week","freq.3_5w":"3â€“5Ã—/week","freq.3_4w":"3â€“4Ã—/week","freq.5w":"5+Ã—/week","freq.daily":"Daily",
"ready.title":"Your Custom Calories & 2â€‘Week Plan is Ready","ready.b1":"Your daily calorie target","ready.b2":"Protein, carbs & fat breakdown","ready.b3":"Example meals based on your preferences","ready.b4":"2â€‘week action plan (training, steps, swaps)",
"btn.showPlan":"Show My Plan",
"results.title":"Your Results",
"results.notice.title":"Approximation notice:","results.notice.text":"This is an estimate, not an exact target. If your current intake is significantly lower, increase calories gradually.",
"results.adjust.note":"Adjust calories over time based on 2â€“4 week trends in weekly average body weight, supported by waist measurements, progress photos, and gym performance. Make small adjustments of ~100â€“150 calories only if progress stalls.",
"results.calories":"Calories","results.bmr":"BMR","results.maintenance":"Estimated maintenance",
"results.target.lose":"Target calories to lose fat:","results.target.gain":"Target calories to build muscle:","results.target.maintain":"Target calories for recomposition:",
"results.more":"More (why these numbers?)",
"results.macros":"Macro targets",
"results.macro.chart.grams":"Macro chart (grams)","results.macro.chart.calories":"Macro chart (calories)",
"results.macros.note":"Protein: {pf} g/kg BW â€¢ Fat: {fat}% of calories â€¢ Carbs: remainder",
"results.protein":"Protein","results.carbs":"Carbs","results.fats":"Fats","results.gramsDay":"grams/day","results.pctCalories":"% of calories","results.donutNote":"Donut colors match calorie split.",
"results.meals":"Simple meal ideas","results.mealIdeas.tag":"MEAL IDEAS",
"results.breakfast":"Breakfast","results.lunch":"Lunch","results.dinner":"Dinner","results.snack":"Snack (optional)","results.noOptions":"No options available","results.noMealsMatch":"No meal ideas match your allergies/dislikes.",
"results.action.title":"2â€‘week action plan","results.action.cut":"1) Cut down (easy)","results.action.swaps":"2) Swaps (only what you need)","results.action.training":"3) Resistance training (2 weeks)","results.action.steps":"4) Daily steps",
"results.action.steps.aim":"aim for about","results.action.steps.perday":"steps/day","results.action.steps.after":"After that","results.action.steps.add1k":"add +1,000 per week until 10,000/day",
"results.sleep":"Sleep",
"results.send":"Want to receive these results?","results.send.yes":"Yes, send me my results",
"results.summary":"Your answers (summary)","results.bodyComp":"Body composition (estimate)","results.bfRange":"Selected range","results.bfMidpoint":"BF% used (midpoint)",
"contact.email":"Email","contact.phone":"Phone (WhatsApp)","contact.note":"Opens your email/WhatsApp with the message pre-filled.","contact.sendEmail":"Send by Email","contact.sendWhatsApp":"Send by WhatsApp",
"cut.sugary":"Sugary snacks","cut.drinks":"Sweetened drinks","cut.fastfood":"Fast food / burgers","cut.alcohol":"Alcohol",
"week.1":"Week 1","week.2":"Week 2","timesPerWeek":"time(s) per week",
"cut.none.sugary":"Since you're not eating any sugary snacks, keep it up! âœ…",
"cut.none.drinks":"Since you're not drinking any sweetened drinks, keep it up! âœ…",
"cut.none.fastfood":"Since you're not eating any fast food, keep it up! âœ…",
"cut.none.alcohol":"Since you're not drinking any alcohol, keep it up! âœ…",
"cut.1x.w1":"cut the portion in half","cut.1x.w2":"eliminate it completely",
"cut.2x.w1":"reduce to 1Ã— per week","cut.2x.w2":"eliminate it completely",
"cut.3x.w1":"reduce to 2Ã— per week","cut.3x.w2":"reduce to 1Ã— per week",
"cut.4x.w1":"reduce to 3Ã— per week","cut.4x.w2":"reduce to 2Ã— per week",
"cut.daily.w1":"reduce to ~5Ã— per week","cut.daily.w2":"reduce to ~3Ã— per week",
"training.keep":"Since you're doing {n} session(s)/week, keep it up and focus on progression! âœ…",
"training.aim":"Since you're doing {n} session(s)/week, aim for {target}+ sessions/week for the next 2 weeks.",
"training.start":"Since you're not training yet, aim for 3 sessions/week for the next 2 weeks.",
"swap.sweet":"Sweet craving â†’ Greek yogurt + banana + cinnamon","swap.chocolate":"Chocolate â†’ 2 squares dark chocolate + fruit","swap.cookies":"Cookies â†’ protein shake + banana","swap.dessert":"Dessert â†’ 1 planned portion after dinner",
"swap.soda":"Soda â†’ sparkling water + lemon","swap.sweetDrink":"Sweet drink â†’ zero-sugar drink","swap.energy":"Energy drink â†’ black coffee or zero-sugar",
"swap.fastfood":"Fast food â†’ home bowl: protein + carbs + veggies","swap.burger":"Burger â†’ homemade wrap: protein + salad","swap.notime":"No time â†’ rotisserie chicken + bag salad + potatoes",
"swap.alc.limit":"Limit alcohol to a set number","swap.alc.water":"Alternate alcohol with sparkling water","swap.alc.meal":"Eat protein-rich meal before drinking",
"swap.keep.sugary":"Sugary snacks: keep doing what you're doing âœ…","swap.keep.drinks":"Sweetened drinks: keep doing what you're doing âœ…","swap.keep.fastfood":"Fast food: keep doing what you're doing âœ…","swap.keep.alcohol":"Alcohol: keep doing what you're doing âœ…",
"training.workouts":"workout(s)",
"steps.note.to10k":"Aim to hit 10,000 steps every day.","steps.note.keep":"You already do 10,000+. Keep it up âœ…","steps.note.progress":"Week 2: add +1,000/day. Then +1,000/week until 10,000/day.",
"sleep.note.keep":"Sleep: keep it up. Aim for 7â€“9 hours.","sleep.note.add30":"Sleep: aim 7â€“9h. Add +30 min/week for 2 weeks.","sleep.note.add45_60":"Sleep: aim 7â€“9h. Add +45â€“60 min/week for 2 weeks.","sleep.note.aim":"Sleep: aim 7â€“9h when possible.",
"recap.title":"Nutrition Assessment Results","recap.name":"Name","recap.email":"Email","recap.country":"Country","recap.age":"Age","recap.gender":"Gender","recap.height":"Height","recap.weight":"Weight","recap.bodyFat":"Body fat","recap.goal":"Goal","recap.activity":"Activity","recap.trainingNow":"Currently training","recap.trainedBefore":"Trained before","recap.trainingType":"Training type","recap.trainingDetails":"Training details","recap.stepsSleep":"Steps | Sleep","recap.calories":"Calories","recap.bmr":"BMR","recap.maintenance":"Maintenance","recap.target":"Target","recap.macros":"Macros",
"goal.lose":"Lose fat","goal.maintain":"Recomposition","goal.gain":"Build muscle",
"activity.sedentary":"Sedentary","activity.light":"Lightly active","activity.moderate":"Moderately active","activity.very":"Very active",
"steps.none":"Very low","steps.2k":"~2,000/day","steps.lt4k":"< 4,000/day","steps.4to8k":"4,000â€“8,000/day","steps.8to12k":"8,000â€“12,000/day","steps.gt12k":"> 12,000/day",
"sleep.lt4":"< 4h","sleep.4to6":"4â€“6h","sleep.6to8":"6â€“8h","sleep.8plus":"8h+",
"trainingType.strength":"Strength","trainingType.cardio":"Cardio","trainingType.mixed":"Mixed","trainingType.sport":"Sport-specific",
"why.title":"Why these targets?","why.calories.title":"Calories","why.calories.bmr":"BMR = baseline energy","why.calories.maintenance":"Maintenance = BMR Ã— activity","why.calories.goal":"Goal shifts the target",
"why.calories.lose":"Below maintenance so your body uses stored fat.","why.calories.gain":"Above maintenance to support training.","why.calories.maintain":"Near maintenance to improve composition.",
"why.protein.title":"Protein","why.protein.text":"Based on body weight, adjusted for body fat.","why.fat.title":"Fat","why.fat.text":"Set based on body fat level.","why.carbs.title":"Carbs","why.carbs.text":"Remaining calories for training + adherence.","why.reminder":"Reminder: it's an estimate. Increase slowly if eating far below.",
"err.fill":"Please fill these fields:","err.selectBf":"Body fat estimate","err.invalidEmail":"Please enter a valid email address (e.g. name@email.com)",
"nudge.left":"question(s) left to continue",
"cta.plan.title":"28â€‘Day LÃ«t'z Roar Kickstart â€” Earn your money back & Win LÃ«t'z Roar signature Hoodie","cta.plan.btn":"Book your Game Plan Call",
"cta.community.title":"Not ready for 1â€‘1 yet?","cta.community.desc":"Join my free Skool community with courses on nutrition and body recomposition.","cta.community.btn":"Join the Free Coaching Group",
"sticky.title":"28â€‘Day LÃ«t'z Roar Kickstart","sticky.desc":"Earn your money back & Win LÃ«t'z Roar signature Hoodie â†’",
"swaps.allGood":"All your habits are already clean â€” no swaps needed! Keep it up âœ…"
},
fr:{
"lang.label":"Langue",
"hero.title":"Quiz Nutrition Gratuit â€” 60 Secondes",
"hero.sub":"RÃ©pondez Ã  quelques questions, obtenez vos Calories, Macros & un plan sur 2 semaines.",
"s1.title":"DonnÃ©es personnelles",
"p.name":"PrÃ©nom","p.name_ph":"ex. Sarah","p.email":"Email","p.email_ph":"nom@email.com",
"p.country":"Pays","p.country.select":"SÃ©lectionner",
"s1.age":"Ã‚ge (annÃ©es)","s1.gender":"Sexe","s1.gender.select":"SÃ©lectionner","s1.gender.male":"Homme","s1.gender.female":"Femme",
"s1.height":"Taille (cm)","s1.weight":"Poids (kg)",
"s1.bfVisual.label":"Estimation graisse corporelle (visuel)","s1.bfVisual.selectGender":"SÃ©lectionnez d'abord votre sexe.","s1.bfVisual.help":"Choisissez la correspondance la plus proche.",
"s1.bf.male.1_7.desc":"Niveau compÃ©tition.","s1.bf.male.8_10.desc":"TrÃ¨s sec.","s1.bf.male.11_12.desc":"Sec.","s1.bf.male.13_15.desc":"AthlÃ©tique.","s1.bf.male.16_19.desc":"Fit.","s1.bf.male.20_24.desc":"Moyen.","s1.bf.male.25_30.desc":"Ventre mou.","s1.bf.male.35_40.desc":"Accumulation de graisse.",
"s1.bf.female.10_12.desc":"Niveau compÃ©tition.","s1.bf.female.15_17.desc":"TrÃ¨s sÃ¨che.","s1.bf.female.18_20.desc":"AthlÃ©tique/fit.","s1.bf.female.21_23.desc":"Fit.","s1.bf.female.24_26.desc":"Moyenne/saine.","s1.bf.female.27_29.desc":"Formes plus douces.","s1.bf.female.30_35.desc":"Accumulation de graisse.","s1.bf.female.36_40.desc":"Graisse importante.","s1.bf.female.50_plus.desc":"Graisse corporelle Ã©levÃ©e.",
"s1.activity":"Niveau d'activitÃ©","s1.activity.select":"SÃ©lectionner","s1.activity.sedentary":"SÃ©dentaire","s1.activity.light":"LÃ©gÃ¨rement actif","s1.activity.moderate":"ModÃ©rÃ©ment actif","s1.activity.very":"TrÃ¨s actif",
"s1.activity.help":"<b>Exemples :</b><br/><b>SÃ©dentaire :</b> bureau, peu de marche.<br/><b>LÃ©ger :</b> bureau + marches, 1â€“3Ã—/sem.<br/><b>ModÃ©rÃ© :</b> actif + 3â€“5Ã—/sem.<br/><b>TrÃ¨s actif :</b> travail physique + entraÃ®nement frÃ©quent.",
"s1.experience":"ExpÃ©rience d'entraÃ®nement","s1.experience.select":"SÃ©lectionner","s1.experience.none":"Aucune","s1.experience.beginner":"DÃ©butant (0â€“2 ans)","s1.experience.intermediate":"IntermÃ©diaire (2â€“5 ans)","s1.experience.advanced":"AvancÃ© (5+ ans)",
"s1.trainingNow":"Vous vous entraÃ®nez ?","s1.trainingNow.select":"SÃ©lectionner","s1.yes":"Oui","s1.no":"Non",
"s1.trainedBefore":"Avez-vous dÃ©jÃ  fait du sport ?","s1.trainingType":"Type d'entraÃ®nement","s1.trainingType.strength":"Musculation","s1.trainingType.cardio":"Cardio","s1.trainingType.mixed":"Mixte","s1.trainingType.sport":"Sport spÃ©cifique",
"s1.trainingDetails":"Que faites-vous exactement ?","s1.trainingDetails.ph":"ex. football + salle, CrossFit...",
"s1.sessions":"SÃ©ances par semaine",
"s1.steps":"Pas quotidiens","s1.steps.none":"TrÃ¨s faible / non suivi","s1.steps.2k":"~2 000/jour","s1.steps.lt4k":"< 4 000/jour","s1.steps.4to8k":"4 000â€“8 000/jour","s1.steps.8to12k":"8 000â€“12 000/jour","s1.steps.gt12k":"> 12 000/jour",
"s1.sleep":"Sommeil par nuit","s1.sleep.lt4":"< 4h","s1.sleep.4to6":"4â€“6h","s1.sleep.6to8":"6â€“8h","s1.sleep.8plus":"8h+",
"s1.goal":"Objectif","s1.goal.lose":"Perdre de la graisse","s1.goal.maintain":"Recomposition (construire du mucle/perdre de la graisse)","s1.goal.gain":"Construire du muscle",
"s2.title":"Nutrition & Habitudes","s2.note":"Choisissez ce qui correspond Ã  votre semaine moyenne.",
"s2.snacks":"Snacks sucrÃ©s","s2.sodas":"Sodas / boissons sucrÃ©es","s2.fastfood":"Fast-food / burgers","s2.alcohol":"Alcool",
"s2.tracks":"Suivez-vous vos calories ?","s2.currentCals":"Calories quotidiennes (optionnel)","s2.currentCals.required":"Calories quotidiennes (obligatoire)","s2.currentCals.ph":"ex. 2200",
"s3.title":"PrÃ©fÃ©rences & Restrictions","s3.diet":"Type d'alimentation","s3.diet.omnivore":"Omnivore","s3.diet.vegetarian":"VÃ©gÃ©tarien","s3.diet.vegan":"VÃ©gane",
"s3.allergies":"Allergies / restrictions",
"s3.allergy.milk":"Lait","s3.allergy.egg":"Å’uf","s3.allergy.peanut":"Arachide","s3.allergy.treenuts":"Fruits Ã  coque","s3.allergy.soy":"Soja","s3.allergy.wheat":"BlÃ©","s3.allergy.gluten":"Gluten","s3.allergy.fish":"Poisson","s3.allergy.shellfish":"Fruits de mer","s3.allergy.sesame":"SÃ©same","s3.allergy.corn":"MaÃ¯s","s3.allergy.mustard":"Moutarde","s3.allergy.celery":"CÃ©leri","s3.allergy.lupin":"Lupin","s3.allergy.sulfites":"Sulfites","s3.allergy.fruits":"Fruits","s3.allergy.vegetables":"LÃ©gumes",
"s3.produce.details":"Allergique Ã  quels fruits/lÃ©gumes ?","s3.produce.details.ph":"ex. fraises, tomates...",
"s3.likes":"Aliments prÃ©fÃ©rÃ©s","s3.likes.ph":"ex. pÃ¢tes, curry, wraps","s3.dislikes":"Aliments que vous Ã©vitez","s3.dislikes.ph":"ex. champignons, thon, Å“ufs",
"common.select":"SÃ©lectionner","common.none":"Aucun","common.no":"Non","common.yes":"Oui","common.sometimes":"Parfois",
"freq.1w":"1Ã—/sem","freq.2w":"2Ã—/sem","freq.3_5w":"3â€“5Ã—/sem","freq.3_4w":"3â€“4Ã—/sem","freq.5w":"5+Ã—/sem","freq.daily":"Tous les jours",
"ready.title":"Vos Calories & Plan sur 2 Semaines sont PrÃªts","ready.b1":"Votre objectif calorique quotidien","ready.b2":"RÃ©partition protÃ©ines, glucides & lipides","ready.b3":"Exemples de repas selon vos prÃ©fÃ©rences","ready.b4":"Plan d'action sur 2 semaines",
"btn.showPlan":"Voir Mon Plan",
"results.title":"Vos rÃ©sultats",
"results.notice.title":"Avertissement :","results.notice.text":"Estimation, pas un objectif exact. Augmentez progressivement si votre apport est bien infÃ©rieur.",
"results.adjust.note":"Ajustez les calories sur 2â€“4 semaines selon la moyenne hebdomadaire du poids.",
"results.calories":"Calories","results.bmr":"MBR","results.maintenance":"Maintenance estimÃ©e",
"results.target.lose":"Cible pour perdre de la graisse :","results.target.gain":"Cible pour dÃ©velopper du muscle :","results.target.maintain":"Cible pour recomposition :",
"results.more":"Plus de dÃ©tails","results.macros":"Objectifs macros",
"results.macro.chart.grams":"Macros (grammes)","results.macro.chart.calories":"Macros (calories)",
"results.macros.note":"ProtÃ©ines : {pf} g/kg PC â€¢ Lipides : {fat}% â€¢ Glucides : reste",
"results.protein":"ProtÃ©ines","results.carbs":"Glucides","results.fats":"Lipides","results.gramsDay":"g/jour","results.pctCalories":"% des calories","results.donutNote":"Les couleurs correspondent Ã  la rÃ©partition.",
"results.meals":"IdÃ©es de repas","results.mealIdeas.tag":"IDÃ‰ES REPAS",
"results.breakfast":"Petit-dÃ©jeuner","results.lunch":"DÃ©jeuner","results.dinner":"DÃ®ner","results.snack":"Collation (optionnelle)","results.noOptions":"Aucune option","results.noMealsMatch":"Aucune idÃ©e de repas ne correspond.",
"results.action.title":"Plan d'action sur 2 semaines","results.action.cut":"1) RÃ©duire","results.action.swaps":"2) Substitutions","results.action.training":"3) EntraÃ®nement (2 semaines)","results.action.steps":"4) Pas quotidiens",
"results.action.steps.aim":"viser environ","results.action.steps.perday":"pas/jour","results.action.steps.after":"Ensuite","results.action.steps.add1k":"+1 000/semaine jusqu'Ã  10 000/jour",
"results.sleep":"Sommeil",
"results.send":"Recevoir ces rÃ©sultats ?","results.send.yes":"Oui, envoyez-moi mes rÃ©sultats",
"results.summary":"RÃ©capitulatif","results.bodyComp":"Composition corporelle","results.bfRange":"Fourchette","results.bfMidpoint":"% graisse utilisÃ©",
"contact.email":"Email","contact.phone":"TÃ©lÃ©phone (WhatsApp)","contact.note":"Ouvre votre email/WhatsApp prÃ©-rempli.","contact.sendEmail":"Envoyer par email","contact.sendWhatsApp":"Envoyer par WhatsApp",
"cut.sugary":"Snacks sucrÃ©s","cut.drinks":"Boissons sucrÃ©es","cut.fastfood":"Fast-food","cut.alcohol":"Alcool",
"week.1":"Semaine 1","week.2":"Semaine 2","timesPerWeek":"fois/sem",
"cut.none.sugary":"Puisque tu ne manges pas de snacks sucrÃ©s, continue comme Ã§a ! âœ…",
"cut.none.drinks":"Puisque tu ne bois pas de boissons sucrÃ©es, continue comme Ã§a ! âœ…",
"cut.none.fastfood":"Puisque tu ne manges pas de fast-food, continue comme Ã§a ! âœ…",
"cut.none.alcohol":"Puisque tu ne bois pas d'alcool, continue comme Ã§a ! âœ…",
"cut.1x.w1":"rÃ©duis la portion de moitiÃ©","cut.1x.w2":"Ã©limine-le complÃ¨tement",
"cut.2x.w1":"rÃ©duis Ã  1Ã— par semaine","cut.2x.w2":"Ã©limine-le complÃ¨tement",
"cut.3x.w1":"rÃ©duis Ã  2Ã— par semaine","cut.3x.w2":"rÃ©duis Ã  1Ã— par semaine",
"cut.4x.w1":"rÃ©duis Ã  3Ã— par semaine","cut.4x.w2":"rÃ©duis Ã  2Ã— par semaine",
"cut.daily.w1":"rÃ©duis Ã  ~5Ã— par semaine","cut.daily.w2":"rÃ©duis Ã  ~3Ã— par semaine",
"training.keep":"Puisque tu fais {n} sÃ©ance(s)/sem, continue et concentre-toi sur la progression ! âœ…",
"training.aim":"Puisque tu fais {n} sÃ©ance(s)/sem, vise {target}+ sÃ©ances/sem pour les 2 prochaines semaines.",
"training.start":"Puisque tu ne t'entraÃ®nes pas encore, vise 3 sÃ©ances/sem pour les 2 prochaines semaines.",
"swap.sweet":"Envie sucrÃ©e â†’ yaourt grec + banane + cannelle","swap.chocolate":"Chocolat â†’ 2 carrÃ©s noir + fruit","swap.cookies":"Biscuits â†’ shake protÃ©inÃ© + banane","swap.dessert":"Dessert â†’ 1 portion planifiÃ©e",
"swap.soda":"Soda â†’ eau pÃ©tillante + citron","swap.sweetDrink":"Boisson sucrÃ©e â†’ sans sucre","swap.energy":"Energy drink â†’ cafÃ© noir",
"swap.fastfood":"Fast-food â†’ bol maison","swap.burger":"Burger â†’ wrap maison","swap.notime":"Pas le temps â†’ poulet rÃ´ti + salade",
"swap.alc.limit":"Limiter l'alcool","swap.alc.water":"Alterner l'alcool avec de l'eau","swap.alc.meal":"Manger des plats riche en protÃ©ine pour Ã©viter le grignotage",
"swap.keep.sugary":"Snacks sucrÃ©s : continue âœ…","swap.keep.drinks":"Boissons sucrÃ©es : continue âœ…","swap.keep.fastfood":"Fast-food : continue âœ…","swap.keep.alcohol":"Alcool : continue âœ…",
"training.workouts":"sÃ©ance(s)",
"steps.note.to10k":"Vise 10 000 pas/jour.","steps.note.keep":"DÃ©jÃ  10 000+. Continue âœ…","steps.note.progress":"Sem 2 : +1 000/jour. Puis +1 000/sem jusqu'Ã  10 000.",
"sleep.note.keep":"Sommeil : continue. Vise 7â€“9h.","sleep.note.add30":"Sommeil : vise 7â€“9h. +30 min/sem.","sleep.note.add45_60":"Sommeil : vise 7â€“9h. +45â€“60 min/sem.","sleep.note.aim":"Sommeil : vise 7â€“9h.",
"recap.title":"RÃ©sultats nutritionnels","recap.name":"PrÃ©nom","recap.email":"Email","recap.country":"Pays","recap.age":"Ã‚ge","recap.gender":"Sexe","recap.height":"Taille","recap.weight":"Poids","recap.bodyFat":"Graisse","recap.goal":"Objectif","recap.activity":"ActivitÃ©","recap.trainingNow":"EntraÃ®nement actuel","recap.trainedBefore":"DÃ©jÃ  entraÃ®nÃ©","recap.trainingType":"Type","recap.trainingDetails":"DÃ©tails","recap.stepsSleep":"Pas | Sommeil","recap.calories":"Calories","recap.bmr":"MBR","recap.maintenance":"Maintenance","recap.target":"Cible","recap.macros":"Macros",
"goal.lose":"Perdre de la graisse","goal.maintain":"Recomposition","goal.gain":"Construire du muscle",
"activity.sedentary":"SÃ©dentaire","activity.light":"LÃ©gÃ¨rement actif","activity.moderate":"ModÃ©rÃ©ment actif","activity.very":"TrÃ¨s actif",
"steps.none":"TrÃ¨s faible","steps.2k":"~2 000/jour","steps.lt4k":"< 4 000/jour","steps.4to8k":"4 000â€“8 000/jour","steps.8to12k":"8 000â€“12 000/jour","steps.gt12k":"> 12 000/jour",
"sleep.lt4":"< 4h","sleep.4to6":"4â€“6h","sleep.6to8":"6â€“8h","sleep.8plus":"8h+",
"trainingType.strength":"Musculation","trainingType.cardio":"Cardio","trainingType.mixed":"Mixte","trainingType.sport":"Sport spÃ©cifique",
"why.title":"Pourquoi ces valeurs ?","why.calories.title":"Calories","why.calories.bmr":"MBR = Ã©nergie de base","why.calories.maintenance":"Maintenance = MBR Ã— activitÃ©","why.calories.goal":"L'objectif ajuste la cible",
"why.calories.lose":"Sous la maintenance pour utiliser les rÃ©serves.","why.calories.gain":"Au-dessus pour soutenir l'entraÃ®nement.","why.calories.maintain":"Proche de la maintenance pour amÃ©liorer la composition.",
"why.protein.title":"ProtÃ©ines","why.protein.text":"BasÃ©es sur le poids et le taux de graisse.","why.fat.title":"Lipides","why.fat.text":"BasÃ©s sur le taux de graisse.","why.carbs.title":"Glucides","why.carbs.text":"Le reste pour l'entraÃ®nement et l'adhÃ©rence.","why.reminder":"Rappel : estimation. Augmente progressivement.",
"err.fill":"Veuillez remplir :","err.selectBf":"Estimation graisse corporelle","err.invalidEmail":"Veuillez entrer une adresse email valide (ex. nom@email.com)",
"nudge.left":"question(s) restante(s) pour continuer",
"cta.plan.title":"28â€‘Day LÃ«t'z Roar Kickstart â€” RÃ©cupÃ¨re ton argent & Gagne le Hoodie","cta.plan.btn":"RÃ©serve ton appel",
"cta.community.title":"Pas prÃªt pour du 1-1 ?","cta.community.desc":"Rejoins la communautÃ© Skool gratuite.","cta.community.btn":"Rejoindre le groupe gratuit",
"sticky.title":"28â€‘Day LÃ«t'z Roar Kickstart","sticky.desc":"RÃ©cupÃ¨re ton argent & Gagne le Hoodie â†’",
"swaps.allGood":"Toutes tes habitudes sont dÃ©jÃ  bonnes â€” pas de substitutions nÃ©cessaires ! Continue comme Ã§a âœ…"
},
de:{
"lang.label":"Sprache",
"hero.title":"Kostenloses 60â€‘Sekunden ErnÃ¤hrungsâ€‘Quiz",
"hero.sub":"Beantworte ein paar Fragen, erhalte Kalorien, Makros & einen 2â€‘Wochenâ€‘Plan.",
"s1.title":"PersÃ¶nliche Daten",
"p.name":"Vorname","p.name_ph":"z.B. Sarah","p.email":"E-Mail","p.email_ph":"name@email.com",
"p.country":"Land","p.country.select":"AuswÃ¤hlen",
"s1.age":"Alter (Jahre)","s1.gender":"Geschlecht","s1.gender.select":"AuswÃ¤hlen","s1.gender.male":"MÃ¤nnlich","s1.gender.female":"Weiblich",
"s1.height":"GrÃ¶ÃŸe (cm)","s1.weight":"Gewicht (kg)",
"s1.bfVisual.label":"KÃ¶rperfett-SchÃ¤tzung (visuell)","s1.bfVisual.selectGender":"Bitte wÃ¤hle zuerst dein Geschlecht.","s1.bfVisual.help":"WÃ¤hle die nÃ¤chste Ãœbereinstimmung.",
"s1.bf.male.1_7.desc":"Wettkampfniveau.","s1.bf.male.8_10.desc":"Sehr schlank.","s1.bf.male.11_12.desc":"Schlank.","s1.bf.male.13_15.desc":"Athletisch.","s1.bf.male.16_19.desc":"Fit.","s1.bf.male.20_24.desc":"Durchschnitt.","s1.bf.male.25_30.desc":"Weiche Mitte.","s1.bf.male.35_40.desc":"Deutliche Fettansammlung.",
"s1.bf.female.10_12.desc":"Wettkampfniveau.","s1.bf.female.15_17.desc":"Sehr schlank.","s1.bf.female.18_20.desc":"Athletisch/fit.","s1.bf.female.21_23.desc":"Fit.","s1.bf.female.24_26.desc":"Durchschnitt/gesund.","s1.bf.female.27_29.desc":"Weichere Form.","s1.bf.female.30_35.desc":"Deutliche Fettansammlung.","s1.bf.female.36_40.desc":"Erhebliches Fett.","s1.bf.female.50_plus.desc":"Hoher KÃ¶rperfettanteil.",
"s1.activity":"AktivitÃ¤tslevel","s1.activity.select":"AuswÃ¤hlen","s1.activity.sedentary":"Sitzend","s1.activity.light":"Leicht aktiv","s1.activity.moderate":"MÃ¤ÃŸig aktiv","s1.activity.very":"Sehr aktiv",
"s1.activity.help":"<b>Beispiele:</b><br/><b>Sitzend:</b> BÃ¼ro, wenig Gehen.<br/><b>Leicht:</b> BÃ¼ro + SpaziergÃ¤nge, 1â€“3Ã—/Wo.<br/><b>MÃ¤ÃŸig:</b> aktiv + 3â€“5Ã—/Wo.<br/><b>Sehr aktiv:</b> kÃ¶rperlicher Job + hÃ¤ufiges Training.",
"s1.experience":"Trainingserfahrung","s1.experience.select":"AuswÃ¤hlen","s1.experience.none":"Keine","s1.experience.beginner":"AnfÃ¤nger (0â€“2 J.)","s1.experience.intermediate":"Fortgeschritten (2â€“5 J.)","s1.experience.advanced":"Sehr erfahren (5+ J.)",
"s1.trainingNow":"Trainierst du aktuell?","s1.trainingNow.select":"AuswÃ¤hlen","s1.yes":"Ja","s1.no":"Nein",
"s1.trainedBefore":"Schon frÃ¼her trainiert?","s1.trainingType":"Trainingsart","s1.trainingType.strength":"Krafttraining","s1.trainingType.cardio":"Cardio","s1.trainingType.mixed":"Gemischt","s1.trainingType.sport":"Sportspezifisch",
"s1.trainingDetails":"Was genau machst du?","s1.trainingDetails.ph":"z.B. FuÃŸball + Gym, CrossFit...",
"s1.sessions":"Einheiten pro Woche",
"s1.steps":"TÃ¤gliche Schritte","s1.steps.none":"Sehr niedrig","s1.steps.2k":"~2.000/Tag","s1.steps.lt4k":"< 4.000/Tag","s1.steps.4to8k":"4.000â€“8.000/Tag","s1.steps.8to12k":"8.000â€“12.000/Tag","s1.steps.gt12k":"> 12.000/Tag",
"s1.sleep":"Schlaf pro Nacht","s1.sleep.lt4":"< 4 Std.","s1.sleep.4to6":"4â€“6 Std.","s1.sleep.6to8":"6â€“8 Std.","s1.sleep.8plus":"8 Std.+",
"s1.goal":"Ziel","s1.goal.lose":"Fett verlieren","s1.goal.maintain":"Rekomposition (Muskeln aufbauen/Fett verlieren)","s1.goal.gain":"Muskeln aufbauen",
"s2.title":"ErnÃ¤hrung & Gewohnheiten","s2.note":"Was passt am besten zu deiner durchschnittlichen Woche?",
"s2.snacks":"Zuckerhaltige Snacks","s2.sodas":"Limonaden / gesÃ¼ÃŸte GetrÃ¤nke","s2.fastfood":"Fast Food / Burger","s2.alcohol":"Alkohol",
"s2.tracks":"Trackst du Kalorien?","s2.currentCals":"Aktuelle tÃ¤gliche Kalorien (optional)","s2.currentCals.required":"Aktuelle tÃ¤gliche Kalorien (erforderlich)","s2.currentCals.ph":"z.B. 2200",
"s3.title":"ErnÃ¤hrungsprÃ¤ferenzen & EinschrÃ¤nkungen","s3.diet":"ErnÃ¤hrungsform","s3.diet.omnivore":"Allesesser","s3.diet.vegetarian":"Vegetarisch","s3.diet.vegan":"Vegan",
"s3.allergies":"Allergien / EinschrÃ¤nkungen",
"s3.allergy.milk":"Milch","s3.allergy.egg":"Ei","s3.allergy.peanut":"Erdnuss","s3.allergy.treenuts":"SchalenfrÃ¼chte","s3.allergy.soy":"Soja","s3.allergy.wheat":"Weizen","s3.allergy.gluten":"Gluten","s3.allergy.fish":"Fisch","s3.allergy.shellfish":"Schalentiere","s3.allergy.sesame":"Sesam","s3.allergy.corn":"Mais","s3.allergy.mustard":"Senf","s3.allergy.celery":"Sellerie","s3.allergy.lupin":"Lupine","s3.allergy.sulfites":"Sulfite","s3.allergy.fruits":"Obst","s3.allergy.vegetables":"GemÃ¼se",
"s3.produce.details":"Allergisch gegen welches Obst/GemÃ¼se?","s3.produce.details.ph":"z.B. Erdbeeren, Tomaten...",
"s3.likes":"Lieblingslebensmittel","s3.likes.ph":"z.B. Pasta, Curry, Wraps","s3.dislikes":"Lebensmittel die du vermeidest","s3.dislikes.ph":"z.B. Pilze, Thunfisch, Eier",
"common.select":"AuswÃ¤hlen","common.none":"Keine","common.no":"Nein","common.yes":"Ja","common.sometimes":"Manchmal",
"freq.1w":"1Ã—/Wo","freq.2w":"2Ã—/Wo","freq.3_5w":"3â€“5Ã—/Wo","freq.3_4w":"3â€“4Ã—/Wo","freq.5w":"5+Ã—/Wo","freq.daily":"TÃ¤glich",
"ready.title":"Deine Kalorien & 2â€‘Wochenâ€‘Plan sind fertig","ready.b1":"Dein tÃ¤gliches Kalorienziel","ready.b2":"Protein, Kohlenhydrate & Fett","ready.b3":"Beispielmahlzeiten nach deinen Vorlieben","ready.b4":"2â€‘Wochenâ€‘Aktionsplan",
"btn.showPlan":"Meinen Plan anzeigen",
"results.title":"Deine Ergebnisse",
"results.notice.title":"Hinweis:","results.notice.text":"SchÃ¤tzung, kein exakter Zielwert. ErhÃ¶he schrittweise.",
"results.adjust.note":"Passe Kalorien basierend auf 2â€“4 Wochen Trends des wÃ¶chentlichen Durchschnittsgewichts an.",
"results.calories":"Kalorien","results.bmr":"Grundumsatz","results.maintenance":"GeschÃ¤tzter Erhalt",
"results.target.lose":"Ziel fÃ¼r Fettverlust:","results.target.gain":"Ziel fÃ¼r Muskelaufbau:","results.target.maintain":"Ziel fÃ¼r Rekomposition:",
"results.more":"Mehr Infos","results.macros":"Makroziele",
"results.macro.chart.grams":"Makros (Gramm)","results.macro.chart.calories":"Makros (Kalorien)",
"results.macros.note":"Protein: {pf} g/kg KG â€¢ Fett: {fat}% â€¢ Kohlenhydrate: Rest",
"results.protein":"Protein","results.carbs":"Kohlenhydrate","results.fats":"Fette","results.gramsDay":"g/Tag","results.pctCalories":"% der Kalorien","results.donutNote":"Farben = Kalorienverteilung.",
"results.meals":"Mahlzeitenideen","results.mealIdeas.tag":"MAHLZEITIDEEN",
"results.breakfast":"FrÃ¼hstÃ¼ck","results.lunch":"Mittagessen","results.dinner":"Abendessen","results.snack":"Snack (optional)","results.noOptions":"Keine Optionen","results.noMealsMatch":"Keine passenden Mahlzeitenideen.",
"results.action.title":"2â€‘Wochenâ€‘Aktionsplan","results.action.cut":"1) Reduzieren","results.action.swaps":"2) Alternativen","results.action.training":"3) Krafttraining (2 Wochen)","results.action.steps":"4) TÃ¤gliche Schritte",
"results.action.steps.aim":"anstreben etwa","results.action.steps.perday":"Schritte/Tag","results.action.steps.after":"Danach","results.action.steps.add1k":"+1.000/Woche bis 10.000/Tag",
"results.sleep":"Schlaf",
"results.send":"Ergebnisse erhalten?","results.send.yes":"Ja, sende mir meine Ergebnisse",
"results.summary":"Zusammenfassung","results.bodyComp":"KÃ¶rperzusammensetzung","results.bfRange":"Bereich","results.bfMidpoint":"KF% verwendet",
"contact.email":"E-Mail","contact.phone":"Telefon (WhatsApp)","contact.note":"Ã–ffnet E-Mail/WhatsApp vorausgefÃ¼llt.","contact.sendEmail":"Per E-Mail senden","contact.sendWhatsApp":"Per WhatsApp senden",
"cut.sugary":"Zuckerhaltige Snacks","cut.drinks":"GesÃ¼ÃŸte GetrÃ¤nke","cut.fastfood":"Fast Food","cut.alcohol":"Alkohol",
"week.1":"Woche 1","week.2":"Woche 2","timesPerWeek":"Mal/Woche",
"cut.none.sugary":"Da du keine zuckerhaltigen Snacks isst, mach weiter so! âœ…",
"cut.none.drinks":"Da du keine gesÃ¼ÃŸten GetrÃ¤nke trinkst, mach weiter so! âœ…",
"cut.none.fastfood":"Da du kein Fast Food isst, mach weiter so! âœ…",
"cut.none.alcohol":"Da du keinen Alkohol trinkst, mach weiter so! âœ…",
"cut.1x.w1":"halbiere die Portion","cut.1x.w2":"streiche es komplett",
"cut.2x.w1":"reduziere auf 1Ã— pro Woche","cut.2x.w2":"streiche es komplett",
"cut.3x.w1":"reduziere auf 2Ã— pro Woche","cut.3x.w2":"reduziere auf 1Ã— pro Woche",
"cut.4x.w1":"reduziere auf 3Ã— pro Woche","cut.4x.w2":"reduziere auf 2Ã— pro Woche",
"cut.daily.w1":"reduziere auf ~5Ã— pro Woche","cut.daily.w2":"reduziere auf ~3Ã— pro Woche",
"training.keep":"Da du {n} Einheit(en)/Wo machst, bleib dran und fokussiere dich auf Progression! âœ…",
"training.aim":"Da du {n} Einheit(en)/Wo machst, strebe {target}+ Einheiten/Wo fÃ¼r die nÃ¤chsten 2 Wochen an.",
"training.start":"Da du noch nicht trainierst, strebe 3 Einheiten/Wo fÃ¼r die nÃ¤chsten 2 Wochen an.",
"swap.sweet":"SÃ¼ÃŸhunger â†’ Joghurt + Banane + Zimt","swap.chocolate":"Schokolade â†’ 2 StÃ¼ck dunkel + Obst","swap.cookies":"Kekse â†’ Proteinshake + Banane","swap.dessert":"Dessert â†’ 1 geplante Portion",
"swap.soda":"Limonade â†’ Sprudel + Zitrone","swap.sweetDrink":"SÃ¼ÃŸes GetrÃ¤nk â†’ zuckerfrei","swap.energy":"Energy-Drink â†’ schwarzer Kaffee",
"swap.fastfood":"Fast Food â†’ Bowl: Protein + GemÃ¼se","swap.burger":"Burger â†’ Wrap: Protein + Salat","swap.notime":"Keine Zeit â†’ GrillhÃ¤hnchen + Salat",
"swap.alc.limit":"Alkohol begrenzen","swap.alc.water":"Alkohol mit Wasser Abwechseln","swap.alc.meal":"Proteinreiche Mahlzeiten essen, um Naschen zu vermeiden",
"swap.keep.sugary":"Zuckersnacks: weiter so âœ…","swap.keep.drinks":"GetrÃ¤nke: weiter so âœ…","swap.keep.fastfood":"Fast Food: weiter so âœ…","swap.keep.alcohol":"Alkohol: weiter so âœ…",
"training.workouts":"Einheit(en)",
"steps.note.to10k":"Ziel: 10.000 Schritte/Tag.","steps.note.keep":"Bereits 10.000+. Weiter so âœ…","steps.note.progress":"Woche 2: +1.000/Tag. Dann +1.000/Woche bis 10.000.",
"sleep.note.keep":"Schlaf: weiter so. Ziel 7â€“9h.","sleep.note.add30":"Schlaf: Ziel 7â€“9h. +30 Min/Woche.","sleep.note.add45_60":"Schlaf: Ziel 7â€“9h. +45â€“60 Min/Woche.","sleep.note.aim":"Schlaf: wenn mÃ¶glich 7â€“9h.",
"recap.title":"ErnÃ¤hrungsanalyse","recap.name":"Name","recap.email":"E-Mail","recap.country":"Land","recap.age":"Alter","recap.gender":"Geschlecht","recap.height":"GrÃ¶ÃŸe","recap.weight":"Gewicht","recap.bodyFat":"KÃ¶rperfett","recap.goal":"Ziel","recap.activity":"AktivitÃ¤t","recap.trainingNow":"Aktuelles Training","recap.trainedBefore":"FrÃ¼her trainiert","recap.trainingType":"Trainingsart","recap.trainingDetails":"Details","recap.stepsSleep":"Schritte | Schlaf","recap.calories":"Kalorien","recap.bmr":"Grundumsatz","recap.maintenance":"Erhalt","recap.target":"Ziel","recap.macros":"Makros",
"goal.lose":"Fett verlieren","goal.maintain":"Rekomposition","goal.gain":"Muskeln aufbauen",
"activity.sedentary":"Sitzend","activity.light":"Leicht aktiv","activity.moderate":"MÃ¤ÃŸig aktiv","activity.very":"Sehr aktiv",
"steps.none":"Sehr niedrig","steps.2k":"~2.000/Tag","steps.lt4k":"< 4.000/Tag","steps.4to8k":"4.000â€“8.000/Tag","steps.8to12k":"8.000â€“12.000/Tag","steps.gt12k":"> 12.000/Tag",
"sleep.lt4":"< 4 Std.","sleep.4to6":"4â€“6 Std.","sleep.6to8":"6â€“8 Std.","sleep.8plus":"8 Std.+",
"trainingType.strength":"Krafttraining","trainingType.cardio":"Cardio","trainingType.mixed":"Gemischt","trainingType.sport":"Sportspezifisch",
"why.title":"Warum diese Werte?","why.calories.title":"Kalorien","why.calories.bmr":"BMR = Grundenergie","why.calories.maintenance":"Erhalt = BMR Ã— AktivitÃ¤t","why.calories.goal":"Das Ziel verschiebt den Bedarf",
"why.calories.lose":"Unter dem Erhalt fÃ¼r Fettnutzung.","why.calories.gain":"Ãœber dem Erhalt fÃ¼r Training.","why.calories.maintain":"Nahe am Erhalt fÃ¼r bessere Komposition.",
"why.protein.title":"Protein","why.protein.text":"Basierend auf Gewicht und KÃ¶rperfett.","why.fat.title":"Fett","why.fat.text":"Basierend auf KÃ¶rperfettanteil.","why.carbs.title":"Kohlenhydrate","why.carbs.text":"Rest fÃ¼r Training und Umsetzbarkeit.","why.reminder":"Hinweis: SchÃ¤tzung. Langsam steigern.",
"err.fill":"Bitte ausfÃ¼llen:","err.selectBf":"KÃ¶rperfett-SchÃ¤tzung","err.invalidEmail":"Bitte gÃ¼ltige E-Mail-Adresse eingeben (z.B. name@email.com)",
"nudge.left":"Frage(n) Ã¼brig um fortzufahren",
"cta.plan.title":"28â€‘Day LÃ«t'z Roar Kickstart â€” Verdiene dein Geld zurÃ¼ck & Gewinne den Hoodie","cta.plan.btn":"StrategiegesprÃ¤ch buchen",
"cta.community.title":"Noch nicht bereit fÃ¼r 1-1?","cta.community.desc":"Tritt der kostenlosen Skool-Community bei.","cta.community.btn":"Kostenlose Gruppe beitreten",
"sticky.title":"28â€‘Day LÃ«t'z Roar Kickstart","sticky.desc":"Verdiene dein Geld zurÃ¼ck & Gewinne den Hoodie â†’",
"swaps.allGood":"Alle deine Gewohnheiten sind bereits sauber â€” keine Alternativen nÃ¶tig! Weiter so âœ…"
}
};

const LANG_KEY="nr_lang";
function t(key){const lang=getLang();return(I18N[lang]&&I18N[lang][key])||(I18N.en[key])||key}
function getLang(){return localStorage.getItem(LANG_KEY)||"en"}
function setLang(lang){localStorage.setItem(LANG_KEY,lang);applyI18n();if(resultsShown&&lastResultsData)renderResults(lastResultsData)}
function applyI18n(){
  document.documentElement.lang=getLang();
  document.querySelectorAll("[data-i18n]").forEach(el=>{el.innerHTML=t(el.getAttribute("data-i18n"))});
  document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{el.setAttribute("placeholder",t(el.getAttribute("data-i18n-placeholder")))});
}

/* =========================
   CALCULATION ENGINE
   ========================= */
const ACTIVITY_FACTOR={sedentary:1.2,light:1.35,moderate:1.55,very:1.825};
const GOAL_MULT={lose:0.80,maintain:1.00,gain:1.15};
function round(n){return Math.round(n)}
function mifflinBMR({gender,weightKg,heightCm,age}){const base=10*weightKg+6.25*heightCm-5*age;return gender==="male"?base+5:base-161}
function bfMidpointPct(data){const min=Number(data.bfMin),max=Number(data.bfMax);if(!isFinite(min)||!isFinite(max)||min<=0||max<=0)return null;return(min+max)/2}
function proteinFactorGPerKgBW(bfPct,gender){if(gender==="male"){if(bfPct<=12)return 2.4;if(bfPct<=15)return 2.2;if(bfPct<=19)return 2.2;if(bfPct<=24)return 2.0;if(bfPct<=30)return 2.0;return 1.6}else{if(bfPct<=20)return 2.4;if(bfPct<=23)return 2.2;if(bfPct<=26)return 2.2;if(bfPct<=29)return 2.0;if(bfPct<=35)return 1.6;return 1.6}}
function fatPctFromBF(bfPct,gender){if(gender==="male"){if(bfPct<=12)return 0.225;if(bfPct<=19)return 0.25;if(bfPct<=24)return 0.25;return 0.30}else{if(bfPct<=17)return 0.225;if(bfPct<=26)return 0.25;if(bfPct<=29)return 0.275;if(bfPct<=35)return 0.275;return 0.30}}
function computeTargets(data){
  const bmr=mifflinBMR(data);const maintenance=bmr*(ACTIVITY_FACTOR[data.activity]??1.2);const targetCalories=maintenance*(GOAL_MULT[data.goal]??1.0);
  const bfPct=bfMidpointPct(data)??(data.gender==="female"?28:20);const pFactor=proteinFactorGPerKgBW(bfPct,data.gender);
  const proteinG=data.weightKg*pFactor;const fatPct=fatPctFromBF(bfPct,data.gender);const fatKcal=targetCalories*fatPct;const fatG=fatKcal/9;
  const proteinKcal=proteinG*4;const carbKcal=Math.max(0,targetCalories-proteinKcal-fatKcal);const carbsG=carbKcal/4;
  return{bmr,maintenance,targetCalories,proteinG,carbsG,fatG,bfPct,fatPct,pFactor};
}

/* =========================
   MEAL IDEAS
   ========================= */
function getMealIdeas(){
  const lang=getLang();
  const MI={
    en:{vegetarian:{breakfast:["Greek yogurt, oats, blueberries, chia seeds, peanut butter","Eggs, spinach, mushrooms, whole-grain toast","Cottage cheese, banana, almond butter, cinnamon"],lunch:["Lentils, quinoa, cucumber, cherry tomatoes, feta, olive oil","Halloumi cheese, mixed greens, roasted sweet potato","Chickpeas, tahini, lemon juice, parsley, whole-wheat pita"],dinner:["Paneer cheese, tomato sauce, basmati rice, spices","Eggplant, lentils, garlic, olive oil","Ricotta cheese, zucchini, whole-wheat pasta"],snacks:["Greek yogurt, almonds","Cheese slices, apple","Whey protein, water, cinnamon"]},vegan:{breakfast:["Tofu scramble, turmeric, bell peppers, onions, spinach","Rolled oats, soy milk, flaxseed, strawberries","Chickpea flour, water, cumin, scallions, olive oil"],lunch:["Black beans, brown rice, avocado, cilantro, lime","Tempeh, broccoli, garlic, sesame oil","Hummus, roasted vegetables, whole-grain wrap"],dinner:["Tofu, coconut milk, curry spices, spinach","Lentil pasta, homemade marinara sauce, mushrooms","Seitan, bell peppers, onions, tamari"],snacks:["Roasted edamame","Peanut butter, rice cakes","Protein powder (plant-based), almond milk"]},omnivore:{breakfast:["Eggs, smoked salmon, avocado, rye bread","Skyr yogurt, raspberries, walnuts","Egg whites, turkey bacon, tomatoes, sourdough"],lunch:["Chicken breast, jasmine rice, green beans","Tuna, olive oil, mixed greens, chickpeas","Lean beef, roasted potatoes, carrots"],dinner:["Salmon, lemon, asparagus, olive oil","Chicken breast, quinoa, roasted Brussels sprouts","Shrimp, garlic, olive oil, rice noodles"],snacks:["Beef jerky","Hard-boiled eggs","Whey protein, banana"]}},
    fr:{vegetarian:{breakfast:["Yaourt grec, flocons d'avoine, myrtilles, graines de chia, beurre de cacahuÃ¨te","Å’ufs, Ã©pinards, champignons, pain complet","Fromage blanc, banane, purÃ©e d'amande, cannelle"],lunch:["Lentilles, quinoa, concombre, tomates cerises, feta, huile d'olive","Halloumi, salade verte, patate douce rÃ´tie","Pois chiches, tahini, citron, persil, pain pita complet"],dinner:["Paneer, sauce tomate, riz basmati, Ã©pices","Aubergine, lentilles, ail, huile d'olive","Ricotta, courgette, pÃ¢tes complÃ¨tes"],snacks:["Yaourt grec, amandes","Fromage, pomme","Whey protÃ©ine, eau, cannelle"]},vegan:{breakfast:["Tofu brouillÃ©, curcuma, poivrons, oignons, Ã©pinards","Flocons d'avoine, lait de soja, graines de lin, fraises","Farine de pois chiches, eau, cumin, oignons verts, huile d'olive"],lunch:["Haricots noirs, riz complet, avocat, coriandre, citron vert","Tempeh, brocoli, ail, huile de sÃ©same","Houmous, lÃ©gumes rÃ´tis, wrap complet"],dinner:["Tofu, lait de coco, Ã©pices curry, Ã©pinards","PÃ¢tes aux lentilles, sauce marinara, champignons","Seitan, poivrons, oignons, tamari"],snacks:["Edamame grillÃ©s","Beurre de cacahuÃ¨te, galettes de riz","ProtÃ©ine vÃ©gÃ©tale, lait d'amande"]},omnivore:{breakfast:["Å’ufs, saumon fumÃ©, avocat, pain de seigle","Skyr, framboises, noix","Blancs d'Å“ufs, bacon de dinde, tomates, pain au levain"],lunch:["Blanc de poulet, riz jasmin, haricots verts","Thon, huile d'olive, salade verte, pois chiches","BÅ“uf maigre, pommes de terre, carottes"],dinner:["Saumon, citron, asperges, huile d'olive","Blanc de poulet, quinoa, choux de Bruxelles","Crevettes, ail, huile d'olive, nouilles de riz"],snacks:["Viande sÃ©chÃ©e","Å’ufs durs","Whey protÃ©ine, banane"]}},
    de:{vegetarian:{breakfast:["Griechischer Joghurt, Haferflocken, Blaubeeren, Chiasamen, Erdnussbutter","Eier, Spinat, Pilze, Vollkorntoast","HÃ¼ttenkÃ¤se, Banane, Mandelbutter, Zimt"],lunch:["Linsen, Quinoa, Gurke, Kirschtomaten, Feta, OlivenÃ¶l","Halloumi, Salat, gerÃ¶stete SÃ¼ÃŸkartoffel","Kichererbsen, Tahini, Zitrone, Petersilie, Vollkorn-Pita"],dinner:["Paneer, Tomatensauce, Basmatireis, GewÃ¼rze","Aubergine, Linsen, Knoblauch, OlivenÃ¶l","Ricotta, Zucchini, Vollkornnudeln"],snacks:["Griechischer Joghurt, Mandeln","KÃ¤se, Apfel","Whey-Protein, Wasser, Zimt"]},vegan:{breakfast:["Tofu-RÃ¼hrei, Kurkuma, Paprika, Zwiebeln, Spinat","Haferflocken, Sojamilch, Leinsamen, Erdbeeren","Kichererbsenmehl, Wasser, KreuzkÃ¼mmel, FrÃ¼hlingszwiebeln, OlivenÃ¶l"],lunch:["Schwarze Bohnen, brauner Reis, Avocado, Koriander, Limette","Tempeh, Brokkoli, Knoblauch, SesamÃ¶l","Hummus, gerÃ¶stetes GemÃ¼se, Vollkorn-Wrap"],dinner:["Tofu, Kokosmilch, CurrygewÃ¼rze, Spinat","Linsennudeln, Marinara-Sauce, Pilze","Seitan, Paprika, Zwiebeln, Tamari"],snacks:["GerÃ¶stete Edamame","Erdnussbutter, Reiswaffeln","Pflanzliches Protein, Mandelmilch"]},omnivore:{breakfast:["Eier, RÃ¤ucherlachs, Avocado, Roggenbrot","Skyr, Himbeeren, WalnÃ¼sse","EiweiÃŸ, Putenbacon, Tomaten, Sauerteigbrot"],lunch:["HÃ¤hnchenbrust, Jasminreis, grÃ¼ne Bohnen","Thunfisch, OlivenÃ¶l, Salat, Kichererbsen","Mageres Rindfleisch, Bratkartoffeln, Karotten"],dinner:["Lachs, Zitrone, Spargel, OlivenÃ¶l","HÃ¤hnchenbrust, Quinoa, Rosenkohl","Garnelen, Knoblauch, OlivenÃ¶l, Reisnudeln"],snacks:["Beef Jerky","Hartgekochte Eier","Whey-Protein, Banane"]}}
  };
  return MI[lang]||MI.en;
}

function normalizeWord(w){w=String(w||"").trim().toLowerCase().replace(/[^a-z0-9\s]/g," ").replace(/\s+/g," ").trim();if(w.endsWith("s")&&w.length>3)w=w.slice(0,-1);return w}
function tokenizeCSV(text){return String(text||"").split(",").map(normalizeWord).filter(Boolean)}
function splitMealParts(t){return String(t||"").split(",").map(p=>p.trim()).filter(Boolean)}
const FOOD_FAMILIES={berries:["strawberry","blueberry","raspberry","blackberry","cranberry"],citrus:["orange","lemon","lime","grapefruit"],nuts:["almond","walnut","cashew","hazelnut","pecan","pistachio"]};
function expandFoodNeedles(tokens){const e=new Set();tokens.forEach(tR=>{const t=normalizeWord(tR);e.add(t);if(FOOD_FAMILIES[t])FOOD_FAMILIES[t].forEach(x=>e.add(normalizeWord(x)))});return Array.from(e)}
function containsAnyDislike(mealText,dislikes){const expanded=expandFoodNeedles(dislikes);const parts=splitMealParts(mealText).map(normalizeWord);if(expanded.includes("egg")&&parts.some(p=>p.includes("egg")))return true;return parts.some(p=>expanded.some(d=>d&&p.includes(d)))}
function partHasAnyNeedle(part,needles){const p=normalizeWord(part);return needles.some(n=>n&&p.includes(normalizeWord(n)))}
function sanitizeMealForAllergies(mealText,data){
  const allergies=data.allergies||[];let parts=splitMealParts(mealText);
  if(allergies.includes("gluten"))parts=parts.map(applyGlutenFreeSwap);
  if(allergies.includes("wheat"))parts=parts.map(applyWheatFreeSwap);
  const removeNeedles=[];
  if(allergies.includes("milk"))removeNeedles.push("yogurt","greek yogurt","skyr","cottage cheese","cheese","feta","ricotta","paneer","halloumi","milk");
  if(allergies.includes("egg"))removeNeedles.push("egg","eggs","egg whites","hard-boiled eggs");
  if(allergies.includes("soy"))removeNeedles.push("soy","soy milk","tofu","tempeh","edamame","tamari");
  if(allergies.includes("peanut"))removeNeedles.push("peanut","peanut butter");
  if(allergies.includes("treenuts"))removeNeedles.push("almond","almonds","almond butter","walnut","walnuts");
  if(allergies.includes("sesame"))removeNeedles.push("sesame","tahini");
  if(allergies.includes("fish"))removeNeedles.push("fish","salmon","smoked salmon","tuna");
  if(allergies.includes("shellfish"))removeNeedles.push("shrimp","shellfish");
  if(allergies.includes("gluten"))removeNeedles.push("seitan");
  const produceNeedles=[];
  if((allergies.includes("fruits")||allergies.includes("vegetables"))&&data.produceAllergyDetails){produceNeedles.push(...expandFoodNeedles(String(data.produceAllergyDetails).split(/[,/]/g).map(normalizeWord).filter(Boolean)))}
  removeNeedles.push(...produceNeedles);
  const kept=parts.filter(part=>!partHasAnyNeedle(part,removeNeedles));
  return kept.length?kept.join(", "):null;
}
function applyGlutenFreeSwap(part){let p=part;const swaps=[[/\bwhole[-\s]?wheat\s+pasta\b/i,"gluten-free pasta"],[/\bpasta\b/i,"gluten-free pasta"],[/\bwhole[-\s]?wheat\s+wrap\b/i,"gluten-free wrap"],[/\bwrap\b/i,"gluten-free wrap"],[/\bpita\b/i,"gluten-free pita"],[/\bwhole[-\s]?grain\s+toast\b/i,"gluten-free toast"],[/\btoast\b/i,"gluten-free toast"],[/\bsourdough\b/i,"gluten-free bread"],[/\brye\s+bread\b/i,"gluten-free bread"],[/\brye\b/i,"gluten-free bread"],[/\bbread\b/i,"gluten-free bread"],[/\boats\b/i,"gluten-free oats"],[/\btamari\b/i,"gluten-free tamari"]];for(const[re,rep]of swaps){if(re.test(p))p=p.replace(re,rep)}return p}
function applyWheatFreeSwap(part){let p=part;const swaps=[[/\bwhole[-\s]?wheat\s+pasta\b/i,"rice pasta"],[/\bpasta\b/i,"rice pasta"],[/\bwhole[-\s]?wheat\s+wrap\b/i,"corn tortilla"],[/\bwrap\b/i,"corn tortilla"],[/\bpita\b/i,"corn tortilla"],[/\btoast\b/i,"wheat-free toast"],[/\bsourdough\b/i,"wheat-free bread"],[/\brye\b/i,"wheat-free bread"],[/\bbread\b/i,"wheat-free bread"],[/\boats\b/i,"certified wheat-free oats"]];for(const[re,rep]of swaps){if(re.test(p))p=p.replace(re,rep)}return p}
function pickN(arr,n){const c=arr.slice();for(let i=c.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[c[i],c[j]]=[c[j],c[i]]}return c.slice(0,Math.min(n,c.length))}
function buildMealIdeas(data){
  const dislikes=tokenizeCSV(data.dislikes);const MI=getMealIdeas();const ideas=MI[data.diet]||MI.omnivore;
  const cl=list=>list.filter(x=>!containsAnyDislike(x,dislikes)).map(x=>sanitizeMealForAllergies(x,data)).filter(Boolean);
  const b=cl(ideas.breakfast),l=cl(ideas.lunch),d=cl(ideas.dinner),s=cl(ideas.snacks);
  return{breakfast:pickN(b,2),lunch:pickN(l,2),dinner:pickN(d,2),snacks:pickN(s,2),empty:(!b.length&&!l.length&&!d.length&&!s.length)};
}

/* =========================
   ACTION PLAN HELPERS â€” NEW PROGRESSIVE LOGIC
   ========================= */
function habitPerWeek(v){if(v==="none")return 0;if(v==="1")return 1;if(v==="2")return 2;if(v==="3-4")return 3.5;if(v==="3-5")return 4;if(v==="5+")return 5.5;if(v==="daily")return 7;return 0}

/* Map select values to a discrete "level" for the progressive cut logic */
function habitLevel(v){
  if(v==="none") return 0;
  if(v==="1") return 1;
  if(v==="2") return 2;
  if(v==="3-5"||v==="3-4") return 3;
  if(v==="5+") return 4;
  if(v==="daily") return 5;
  return 0;
}

/*
  NEW progressive cut builder.
  Returns an object { type:"none"|"progressive", ... } with i18n-ready content.
  
  Level 0 (None)   â†’ "Since you're not eating/drinking any X, keep it up!"
  Level 1 (1Ã—/wk)  â†’ W1: cut portion in half, W2: eliminate completely
  Level 2 (2Ã—/wk)  â†’ W1: reduce to 1Ã—, W2: eliminate completely
  Level 3 (3-5Ã—/wk)â†’ W1: reduce to 2Ã—, W2: reduce to 1Ã—
  Level 4 (5+Ã—/wk) â†’ W1: reduce to 3Ã—, W2: reduce to 2Ã—  (was mapped as 4)
  Level 5 (daily)   â†’ W1: reduce to ~5Ã—, W2: reduce to ~3Ã—
*/
function buildProgressiveCut(nameKey, selectValue){
  const level = habitLevel(selectValue);
  // Map nameKey to the "none" i18n key suffix
  const noneKeyMap = {
    "cut.sugary":"cut.none.sugary",
    "cut.drinks":"cut.none.drinks",
    "cut.fastfood":"cut.none.fastfood",
    "cut.alcohol":"cut.none.alcohol"
  };
  if(level === 0){
    return { type:"none", noneKey: noneKeyMap[nameKey] || "swap.keep.sugary" };
  }
  // Pick the right w1/w2 keys based on level
  let w1Key, w2Key;
  if(level === 1){ w1Key="cut.1x.w1"; w2Key="cut.1x.w2"; }
  else if(level === 2){ w1Key="cut.2x.w1"; w2Key="cut.2x.w2"; }
  else if(level === 3){ w1Key="cut.3x.w1"; w2Key="cut.3x.w2"; }
  else if(level === 4){ w1Key="cut.4x.w1"; w2Key="cut.4x.w2"; }
  else { w1Key="cut.daily.w1"; w2Key="cut.daily.w2"; }
  
  return { type:"progressive", nameKey, w1Key, w2Key };
}

/*
  NEW training progression logic.
  Returns an HTML string directly.
  
  - sessionsPerWeek "0" or not training â†’ "Since you're not training yet, aim for 3 sessions/week for the next 2 weeks."
  - "1-2" â†’ "Since you're doing 1â€“2 sessions/week, aim for 3+ sessions/week for the next 2 weeks."
  - "3"   â†’ "Since you're doing 3 sessions/week, aim for 4+ sessions/week for the next 2 weeks."
  - "4"   â†’ "Since you're doing 4 sessions/week, aim for 5+ sessions/week for the next 2 weeks."
  - "5-6" or "7" â†’ "Since you're doing X sessions/week, keep it up and focus on progression!"
*/
function buildTrainingAdvice(data){
  const s = data.sessionsPerWeek || "0";
  const notTraining = (data.trainingNow === "no") || s === "0" || s === "";
  
  if(notTraining){
    return t("training.start");
  }
  
  // Parse the numeric midpoint for display
  const displayMap = {"1-2":"1â€“2","3":"3","4":"4","5-6":"5â€“6","7":"7+"};
  const numericMap = {"1-2":1.5,"3":3,"4":4,"5-6":5.5,"7":7};
  const displayLabel = displayMap[s] || s;
  const numVal = numericMap[s] || 0;
  
  if(numVal >= 5){
    // Already doing 5+ â†’ keep it up
    return t("training.keep").replace("{n}", displayLabel);
  }
  
  // Aim for the next level up
  const targetMap = {"1-2":"3","3":"4","4":"5"};
  const target = targetMap[s] || "5";
  
  return t("training.aim").replace("{n}", displayLabel).replace("{target}", target);
}

function baseStepsFromBand(band){if(band==="none")return 2000;if(band==="2k")return 2000;if(band==="lt4k")return 3000;if(band==="4to8k")return 6000;if(band==="8to12k")return 9000;if(band==="gt12k")return 12000;return 6000}
function stepPlan(stepsBand){if(stepsBand==="8to12k")return{mode:"to10k",noteKey:"steps.note.to10k"};const start=baseStepsFromBand(stepsBand);if(start>=10000)return{mode:"keep",noteKey:"steps.note.keep"};return{mode:"progress",week1:start,week2:Math.min(10000,start+1000),noteKey:"steps.note.progress",showLongTerm:true}}
function sleepAdvice(sleepBand){if(sleepBand==="6to8"||sleepBand==="8plus")return{noteKey:"sleep.note.keep"};if(sleepBand==="4to6")return{noteKey:"sleep.note.add30"};if(sleepBand==="lt4")return{noteKey:"sleep.note.add45_60"};return{noteKey:"sleep.note.aim"}}

function swapsForHabits(data){
  const swaps=[];
  // Only show swap suggestions for categories the user actually consumes
  if(habitPerWeek(data.snacks)>0) swaps.push("swap.sweet","swap.chocolate","swap.cookies","swap.dessert");
  if(habitPerWeek(data.sodas)>0) swaps.push("swap.soda","swap.sweetDrink","swap.energy");
  if(habitPerWeek(data.fastfood)>0) swaps.push("swap.fastfood","swap.burger","swap.notime");
  if(habitPerWeek(data.alcohol)>0) swaps.push("swap.alc.limit","swap.alc.water","swap.alc.meal");
  return swaps;
}
function goalLabelI18n(goal){if(goal==="lose")return t("results.target.lose");if(goal==="gain")return t("results.target.gain");return t("results.target.maintain")}
function buildWhyText(data,targets){const g=t("goal."+(data.goal||"maintain"));const wc=data.goal==="lose"?t("why.calories.lose"):data.goal==="gain"?t("why.calories.gain"):t("why.calories.maintain");return`${t("why.title")}\n\nâ€¢ ${t("why.calories.title")}:\n  - ${t("why.calories.bmr")}\n  - ${t("why.calories.maintenance")}\n  - ${t("why.calories.goal")} (${g})\n  - ${wc}\n\nâ€¢ ${t("why.protein.title")}:\n  - ${t("why.protein.text")}\n\nâ€¢ ${t("why.fat.title")}:\n  - ${t("why.fat.text")}\n\nâ€¢ ${t("why.carbs.title")}:\n  - ${t("why.carbs.text")}\n\n${t("why.reminder")}`}
function getCountryName(code){const sel=document.getElementById("country");if(!sel)return code||"-";const opt=sel.querySelector(`option[value="${code}"]`);return opt?opt.textContent:(code||"-")}
function buildResultsText(data,targets){return`${t("recap.title")}\n\n${t("recap.name")}: ${data.firstName||"-"}\n${t("recap.email")}: ${data.userEmail||"-"}\n${t("recap.country")}: ${getCountryName(data.country)}\n${t("recap.age")}: ${data.age||"-"} | ${t("recap.gender")}: ${data.gender==="male"?t("s1.gender.male"):t("s1.gender.female")}\n${t("recap.height")}: ${data.heightCm||"-"} cm | ${t("recap.weight")}: ${data.weightKg||"-"} kg\n${t("recap.bodyFat")}: ${data.bfRangeLabel||"-"} (~${Math.round(targets.bfPct)}%)\n${t("recap.goal")}: ${t("goal."+(data.goal||"maintain"))}\n${t("recap.activity")}: ${t("activity."+(data.activity||"moderate"))}\n\n${t("recap.calories")}:\n- ${t("recap.bmr")}: ${Math.round(targets.bmr)} kcal/day\n- ${t("recap.maintenance")}: ${Math.round(targets.maintenance)} kcal/day\n- ${t("recap.target")}: ${Math.round(targets.targetCalories)} kcal/day\n\n${t("recap.macros")}:\n- ${t("results.protein")}: ${Math.round(targets.proteinG)} g/day\n- ${t("results.carbs")}: ${Math.round(targets.carbsG)} g/day\n- ${t("results.fats")}: ${Math.round(targets.fatG)} g/day\n`}
function isValidEmail(email){return/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(String(email).trim())}
function escapeHtml(s){return String(s||"").replace(/[&<>"']/g,c=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[c]))}

/* DONUT SVG */
function pctRound(x){return Math.max(0,Math.round(x))}
function donutSVG(pP,pC,pF){const r=44,c=2*Math.PI*r;const p1=(pP/100)*c,p2=(pC/100)*c,p3=(pF/100)*c;return`<svg width="120" height="120" viewBox="0 0 120 120"><circle cx="60" cy="60" r="${r}" fill="none" stroke="var(--border)" stroke-width="16"/><circle cx="60" cy="60" r="${r}" fill="none" stroke="var(--protein)" stroke-width="16" stroke-dasharray="${p1} ${c-p1}" stroke-dashoffset="0" transform="rotate(-90 60 60)"/><circle cx="60" cy="60" r="${r}" fill="none" stroke="var(--carbs)" stroke-width="16" stroke-dasharray="${p2} ${c-p2}" stroke-dashoffset="${-p1}" transform="rotate(-90 60 60)"/><circle cx="60" cy="60" r="${r}" fill="none" stroke="var(--fats)" stroke-width="16" stroke-dasharray="${p3} ${c-p3}" stroke-dashoffset="${-(p1+p2)}" transform="rotate(-90 60 60)"/><circle cx="60" cy="60" r="30" fill="var(--card)"/><text x="60" y="64" text-anchor="middle" font-size="10" fill="var(--muted)" font-weight="800">Macros</text></svg>`}

/* =========================
   RENDER RESULTS
   ========================= */
function renderResults(data){
  const el=document.getElementById("results");const targets=computeTargets(data);
  trackToGoogleSheets('completed',currentRevealedIndex,{targetCalories:Math.round(targets.targetCalories),proteinG:Math.round(targets.proteinG),carbsG:Math.round(targets.carbsG),fatG:Math.round(targets.fatG)});

  /* ---- NEW progressive cut items ---- */
  const cutItems = [
    buildProgressiveCut("cut.sugary", data.snacks),
    buildProgressiveCut("cut.drinks", data.sodas),
    buildProgressiveCut("cut.fastfood", data.fastfood),
    buildProgressiveCut("cut.alcohol", data.alcohol)
  ];

  let cutsHtml = "";
  cutItems.forEach(item => {
    if(item.type === "none"){
      cutsHtml += `<li>${escapeHtml(t(item.noneKey))}</li>`;
    } else {
      cutsHtml += `<li><b>${escapeHtml(t(item.nameKey))}:</b><br/>${escapeHtml(t("week.1"))}: ${escapeHtml(t(item.w1Key))}<br/>${escapeHtml(t("week.2"))}: ${escapeHtml(t(item.w2Key))}</li>`;
    }
  });

  /* ---- NEW training advice ---- */
  const trainingHtml = buildTrainingAdvice(data);

  const steps=stepPlan(data.steps);const sleep=sleepAdvice(data.sleep);
  const swaps=swapsForHabits(data);const meals=buildMealIdeas(data);
  const whyText=buildWhyText(data,targets);const resultsText=buildResultsText(data,targets);
  const pK=targets.proteinG*4,cK=targets.carbsG*4,fK=targets.fatG*9;const totalK=Math.max(1,pK+cK+fK);
  const pctPk=(pK/totalK)*100,pctCk=(cK/totalK)*100,pctFk=(fK/totalK)*100;
  const donut=donutSVG(pctRound(pctPk),pctRound(pctCk),pctRound(pctFk));

  const ctaBlockHtml=`<div class="ctaBox"><div class="ctaItem"><div class="ctaTitle">${t("cta.plan.title")}</div><a href="https://www.shop.letzroar.com/28-days-letz-roar-kickstart/" class="ctaBtn ctaPrimary cta-kickstart" target="_blank">${t("cta.plan.btn")} â†’</a></div><div class="ctaDivider"></div><div class="ctaItem"><div class="ctaTitle">${t("cta.community.title")}</div><div class="ctaDesc">${t("cta.community.desc")}</div><a href="https://www.skool.com/fitness-transformation-8222/classroom" class="ctaBtn ctaSecondary cta-skool" target="_blank">${t("cta.community.btn")} â†’</a></div></div>`;
  const sendBlock=`<h2>${t("results.send")}</h2><div class="field" style="margin-top:6px"><label class="check" style="padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--bg)"><input type="checkbox" class="sendMeResultsCheckbox"/>${t("results.send.yes")}</label></div><div class="contactBlockInstance" style="display:none"><div class="row"><div class="field"><label>${t("contact.email")}</label><input type="email" class="emailInputField" placeholder="name@email.com"/></div><div class="field"><label>${t("contact.phone")}</label><input type="tel" class="phoneInputField" placeholder="+33 6 12 34 56 78"/></div></div><div style="display:flex;gap:8px;margin-top:8px"><button type="button" class="btn-ghost emailBtnAction">${t("contact.sendEmail")}</button><button type="button" class="btn-ghost waBtnAction">${t("contact.sendWhatsApp")}</button></div><p class="note">${t("contact.note")}</p></div>`;

  el.innerHTML=`
    <div class="warn"><b>${t("results.notice.title")}</b> ${t("results.notice.text")}</div>
    <div class="adjustNote">${t("results.adjust.note")}</div>
    <h2>${t("results.bodyComp")}</h2>
    <div class="grid2"><div class="kpi"><div class="small">${t("results.bfRange")}</div><b>${escapeHtml(data.bfRangeLabel||"-")}</b></div><div class="kpi"><div class="small">${t("results.bfMidpoint")}</div><b>${Math.round(targets.bfPct)}%</b></div></div>
    <h2>${t("results.calories")}</h2>
    <div class="grid2"><div class="kpi"><div class="small">${t("results.bmr")}</div><b>${round(targets.bmr)} kcal/day</b></div><div class="kpi"><div class="small">${t("results.maintenance")}</div><b>${round(targets.maintenance)} kcal/day</b></div><div class="kpi target span2"><div class="small">${escapeHtml(goalLabelI18n(data.goal))}</div><b>${round(targets.targetCalories)} kcal/day</b></div></div>
    <div class="drop" id="moreDrop"><div class="dropHead" id="moreBtn">${t("results.more")} <span style="opacity:.6;font-weight:900" id="caret">â–¾</span></div><div class="dropBody"><pre class="mono">${escapeHtml(whyText)}</pre></div></div>
    <h2>${t("results.macros")}</h2>
    <div><span class="pill protein"><b>${t("results.protein")}</b> ${round(targets.proteinG)} g/day</span><span class="pill carbs"><b>${t("results.carbs")}</b> ${round(targets.carbsG)} g/day</span><span class="pill fats"><b>${t("results.fats")}</b> ${round(targets.fatG)} g/day</span><div class="note">${t("results.macros.note").replace("{pf}",targets.pFactor.toFixed(1)).replace("{fat}",String(Math.round(targets.fatPct*100)))}</div></div>
    <div class="donutRow">
      <div class="donutCard"><div class="donutHead"><b>${t("results.macro.chart.grams")}</b><span>${t("results.gramsDay")}</span></div><div class="donutWrap">${donut}<div class="legend"><div class="legItem"><span class="swatch swProtein"></span>${t("results.protein")}: ${round(targets.proteinG)} g</div><div class="legItem"><span class="swatch swCarbs"></span>${t("results.carbs")}: ${round(targets.carbsG)} g</div><div class="legItem"><span class="swatch swFats"></span>${t("results.fats")}: ${round(targets.fatG)} g</div></div></div></div>
      <div class="donutCard"><div class="donutHead"><b>${t("results.macro.chart.calories")}</b><span>${t("results.pctCalories")}</span></div><div class="donutWrap">${donut}<div class="legend"><div class="legItem"><span class="swatch swProtein"></span>${t("results.protein")}: ${round(pK)} kcal (${pctRound(pctPk)}%)</div><div class="legItem"><span class="swatch swCarbs"></span>${t("results.carbs")}: ${round(cK)} kcal (${pctRound(pctCk)}%)</div><div class="legItem"><span class="swatch swFats"></span>${t("results.fats")}: ${round(fK)} kcal (${pctRound(pctFk)}%)</div></div></div></div>
    </div>
    ${ctaBlockHtml}<div class="hr"></div>${sendBlock}<div class="hr"></div>
    <div class="mealsBox"><div class="mealsTitle"><span>${t("results.mealIdeas.tag")}</span> ${t("results.meals")}</div>
      ${meals.empty?`<div class="help">${t("results.noMealsMatch")}</div>`:`
        <b>${t("results.breakfast")}:</b><ul class="list">${meals.breakfast.length?meals.breakfast.map(m=>`<li>${escapeHtml(m)}</li>`).join(""):`<li>${t("results.noOptions")}</li>`}</ul>
        <b>${t("results.lunch")}:</b><ul class="list">${meals.lunch.length?meals.lunch.map(m=>`<li>${escapeHtml(m)}</li>`).join(""):`<li>${t("results.noOptions")}</li>`}</ul>
        <b>${t("results.dinner")}:</b><ul class="list">${meals.dinner.length?meals.dinner.map(m=>`<li>${escapeHtml(m)}</li>`).join(""):`<li>${t("results.noOptions")}</li>`}</ul>
        <b>${t("results.snack")}:</b><ul class="list">${meals.snacks.length?meals.snacks.map(m=>`<li>${escapeHtml(m)}</li>`).join(""):`<li>${t("results.noOptions")}</li>`}</ul>`}
    </div><div class="hr"></div>
    <h2>${t("results.action.title")}</h2>
    <h2 style="margin-top:10px">${t("results.action.cut")}</h2>
    <ul class="list">${cutsHtml}</ul>
    <h2>${t("results.action.swaps")}</h2>
    ${swaps.length ? `<ul class="list">${swaps.map(k=>`<li>${escapeHtml(t(k))}</li>`).join("")}</ul>` : `<div class="help">${t("swaps.allGood")}</div>`}
    <h2>${t("results.action.training")}</h2>
    <div class="help">${escapeHtml(trainingHtml)}</div>
    <h2>${t("results.action.steps")}</h2>
    ${steps.mode==="keep"?`<div class="help">${escapeHtml(t(steps.noteKey))}</div>`:steps.mode==="to10k"?`<div class="help">${escapeHtml(t(steps.noteKey))}</div>`:`<p class="note">${escapeHtml(t(steps.noteKey))}</p><ul class="list"><li><b>${t("week.1")}:</b> ${t("results.action.steps.aim")} <b>${steps.week1.toLocaleString()}</b> ${t("results.action.steps.perday")}</li><li><b>${t("week.2")}:</b> ${t("results.action.steps.aim")} <b>${steps.week2.toLocaleString()}</b> ${t("results.action.steps.perday")}</li>${steps.showLongTerm?`<li><b>${t("results.action.steps.after")}:</b> ${t("results.action.steps.add1k")}</li>`:``}</ul>`}
    <h2>${t("results.sleep")}</h2><div class="help">${escapeHtml(t(sleep.noteKey))}</div>
    ${ctaBlockHtml}<div class="hr"></div>${sendBlock}<div class="hr"></div>
    <h2>${t("results.summary")}</h2><div class="help"><pre class="mono">${escapeHtml(resultsText)}</pre></div>
  `;

  // Dropdown
  const drop=document.getElementById("moreDrop"),head=document.getElementById("moreBtn"),caret=document.getElementById("caret");
  head.addEventListener("click",()=>{drop.classList.toggle("open");caret.textContent=drop.classList.contains("open")?"â–´":"â–¾"});
  // CTA tracking
  document.querySelectorAll('.cta-kickstart').forEach(l=>{l.addEventListener('click',()=>trackCtaClick('kickstart'))});
  document.querySelectorAll('.cta-skool').forEach(l=>{l.addEventListener('click',()=>trackCtaClick('skool'))});
  // Send results
  const allCB=document.querySelectorAll('.sendMeResultsCheckbox');const allCBlocks=document.querySelectorAll('.contactBlockInstance');
  allCB.forEach((cb,i)=>{const block=allCBlocks[i];if(!block)return;cb.addEventListener("change",()=>{allCB.forEach(o=>{o.checked=cb.checked});allCBlocks.forEach(o=>{o.style.display=cb.checked?"":"none"});if(cb.checked){ctaClicks.sendResultsChecked=true;trackToGoogleSheets('send_results_checked',currentRevealedIndex);block.scrollIntoView({behavior:"smooth",block:"start"})}})});
  const allEI=document.querySelectorAll('.emailInputField');const allPI=document.querySelectorAll('.phoneInputField');
  if(data.userEmail)allEI.forEach(inp=>{inp.value=data.userEmail});
  const trackEmailDb=debounce(()=>{const e=allEI[0]?allEI[0].value.trim():"";if(e&&e.includes('@')){trackContactInfo('email',e);allEI.forEach(o=>{o.value=e})}},1500);
  allEI.forEach(inp=>{inp.addEventListener('input',trackEmailDb);inp.addEventListener('blur',()=>{const e=inp.value.trim();if(e&&e.includes('@')){trackContactInfo('email',e);allEI.forEach(o=>{if(o!==inp)o.value=inp.value})}})});
  const trackPhoneDb=debounce(()=>{const p=allPI[0]?allPI[0].value.trim():"";if(p&&p.length>=8){trackContactInfo('phone',p);allPI.forEach(o=>{o.value=p})}},1500);
  allPI.forEach(inp=>{inp.addEventListener('input',trackPhoneDb);inp.addEventListener('blur',()=>{const p=inp.value.trim();if(p&&p.length>=8){trackContactInfo('phone',p);allPI.forEach(o=>{if(o!==inp)o.value=inp.value})}})});
  document.querySelectorAll('.emailBtnAction').forEach(btn=>{btn.addEventListener("click",()=>{const pb=btn.closest('.contactBlockInstance');const ei=pb?pb.querySelector('.emailInputField'):allEI[0];const email=ei?ei.value.trim():"";if(!email){alert("Please enter your email.");return}userContactInfo.email=email;ctaClicks.sendEmail=true;trackToGoogleSheets('send_email_clicked',currentRevealedIndex,{contactEmail:email});window.location.href=`mailto:${encodeURIComponent(email)}?subject=${encodeURIComponent("Your Nutrition Assessment Results")}&body=${encodeURIComponent(resultsText)}`})});
  document.querySelectorAll('.waBtnAction').forEach(btn=>{btn.addEventListener("click",()=>{const pb=btn.closest('.contactBlockInstance');const pi=pb?pb.querySelector('.phoneInputField'):allPI[0];let phone=pi?pi.value.trim():"";if(!phone){alert("Please enter your phone number.");return}userContactInfo.phone=phone;ctaClicks.sendWhatsApp=true;trackToGoogleSheets('send_whatsapp_clicked',currentRevealedIndex,{contactPhone:phone});phone=phone.replace(/[^\d]/g,"");if(phone.length<8){alert("Please enter a valid phone number.");return}window.open(`https://wa.me/${phone}?text=${encodeURIComponent(resultsText)}`,"_blank")})});
}

/* =========================
   VALIDATION HELPERS
   ========================= */
function clearInvalidMarks(stepEl){if(!stepEl)return;stepEl.querySelectorAll(".invalid").forEach(x=>x.classList.remove("invalid"));stepEl.querySelectorAll(".invalid-label").forEach(x=>x.classList.remove("invalid-label"));const bg=document.getElementById("bfGrid");if(bg)bg.classList.remove("invalidGrid")}
function markFieldInvalid(el){el.classList.add("invalid");const fw=el.closest(".field");if(fw){const l=fw.querySelector("label");if(l)l.classList.add("invalid-label")}if(el.id==="bfMin"||el.id==="bfMax"||el.id==="bfRangeLabel"){const g=document.getElementById("bfGrid");if(g)g.classList.add("invalidGrid")}}
function showErrorBanner(labels){const b=document.getElementById("errBanner");if(!labels.length){b.style.display="none";b.innerHTML="";return}b.style.display="block";b.innerHTML=`<b>${escapeHtml(t("err.fill"))}</b> ${labels.map(x=>`<span style="white-space:nowrap"> â€¢ ${escapeHtml(x)}</span>`).join("")}`}

function validateSection(name){
  const el=getSectionEl(name);if(!el)return true;clearInvalidMarks(el);
  const required=Array.from(el.querySelectorAll("[required]"));let firstInvalid=null;const missing=[];
  for(const r of required){
    const fieldWrap=r.closest(".field");if(fieldWrap&&fieldWrap.style.display==="none")continue;
    const parentWrap=r.closest("[id$='Wrap']");if(parentWrap&&parentWrap.style.display==="none")continue;
    if(r.type==="hidden"&&(r.id==="bfMin"||r.id==="bfMax"))continue;
    if(!r.value){if(!firstInvalid)firstInvalid=r;markFieldInvalid(r);const w=r.closest(".field"),l=w?w.querySelector("label"):null;if(r.id==="bfRangeLabel"){if(!missing.includes(t("err.selectBf")))missing.push(t("err.selectBf"))}else missing.push(l?l.textContent.trim():"Missing field");continue}
    if(r.type==="email"&&!isValidEmail(r.value)){if(!firstInvalid)firstInvalid=r;markFieldInvalid(r);missing.push(t("err.invalidEmail"))}
  }
  if(name==="details"){const tdW=document.getElementById("trainingDetailsWrap");if(tdW&&tdW.style.display!=="none"){const td=document.getElementById("trainingDetails");if(!td.value){if(!firstInvalid)firstInvalid=td;markFieldInvalid(td);missing.push(t("s1.trainingDetails"))}}}
  if(name==="diet"){const pW=document.getElementById("produceAllergyWrap");if(pW&&pW.style.display!=="none"){const pd=document.getElementById("produceAllergyDetails");if(!pd.value){if(!firstInvalid)firstInvalid=pd;markFieldInvalid(pd);missing.push(t("s3.produce.details"))}}}
  if(firstInvalid){showErrorBanner(missing);firstInvalid.scrollIntoView({behavior:"smooth",block:"center"});firstInvalid.focus({preventScroll:true});return false}
  showErrorBanner([]);return true;
}

/* =========================
   NUDGE SYSTEM
   ========================= */
function getRequiredFieldsInfo(sectionName){
  const el=getSectionEl(sectionName);if(!el)return{total:0,missing:[],missingEls:[]};
  const required=Array.from(el.querySelectorAll("[required]"));const missing=[];const missingEls=[];
  for(const r of required){
    if(r.type==="hidden"&&(r.id==="bfMin"||r.id==="bfMax"))continue;
    if(r.type==="hidden"&&r.id==="bfRangeLabel"){if(!r.value){missing.push(t("err.selectBf"));missingEls.push(document.getElementById("bfGrid")||r)}continue}
    const fieldWrap=r.closest(".field");if(fieldWrap&&fieldWrap.style.display==="none")continue;
    const parentWrap=r.closest("[id$='Wrap']");if(parentWrap&&parentWrap.style.display==="none")continue;
    if(!r.value){const wrap=r.closest(".field");const lab=wrap?wrap.querySelector("label"):null;missing.push(lab?lab.textContent.trim():"Field");missingEls.push(r)}
  }
  if(sectionName==="details"){const tdW=document.getElementById("trainingDetailsWrap");if(tdW&&tdW.style.display!=="none"){const td=document.getElementById("trainingDetails");if(!td.value){missing.push(t("s1.trainingDetails"));missingEls.push(td)}}}
  if(sectionName==="diet"){const pW=document.getElementById("produceAllergyWrap");if(pW&&pW.style.display!=="none"){const pd=document.getElementById("produceAllergyDetails");if(!pd.value){missing.push(t("s3.produce.details"));missingEls.push(pd)}}}
  return{total:required.length,missing,missingEls};
}

function updateNudgeBars(){
  document.querySelectorAll(".nudgeBar").forEach(bar=>{
    const sectionName=bar.getAttribute("data-nudge-for");const secEl=getSectionEl(sectionName);
    if(!secEl||!secEl.classList.contains("visible")){bar.style.display="none";return}
    const info=getRequiredFieldsInfo(sectionName);
    if(info.missing.length===0){bar.style.display="none";clearUnansweredHighlights(secEl);return}
    const qWord=t("nudge.left");
    bar.innerHTML=`<div><span class="nudgeCount">${info.missing.length}</span>${info.missing.length} ${qWord}</div><div class="nudgeFields">${info.missing.map(m=>`<span>${escapeHtml(m)}</span>`).join("")}</div>`;
    bar.style.display="block";
    highlightUnanswered(secEl,info.missingEls);
    bar.onclick=()=>{if(info.missingEls.length>0){const target=info.missingEls[0];target.scrollIntoView({behavior:"smooth",block:"center"});if(target.focus)target.focus({preventScroll:true})}};
  });
}

function highlightUnanswered(secEl,missingEls){
  clearUnansweredHighlights(secEl);
  missingEls.forEach(el=>{
    if(el.id==="bfGrid"||el.classList&&el.classList.contains("bfGrid")){const grid=document.getElementById("bfGrid");if(grid)grid.classList.add("unanswered");const wrap=document.getElementById("bfFieldWrap");if(wrap){const lab=wrap.querySelector("label");if(lab)lab.classList.add("unanswered-label")}}
    else{el.classList.add("unanswered");const wrap=el.closest(".field");if(wrap){const lab=wrap.querySelector("label");if(lab)lab.classList.add("unanswered-label")}}
  });
}

function clearUnansweredHighlights(secEl){
  if(!secEl)return;secEl.querySelectorAll(".unanswered").forEach(x=>x.classList.remove("unanswered"));secEl.querySelectorAll(".unanswered-label").forEach(x=>x.classList.remove("unanswered-label"));
  const bg=document.getElementById("bfGrid");if(bg)bg.classList.remove("unanswered");
}

/* =========================
   EMAIL VALIDATION (RED)
   ========================= */
function showEmailError(show){
  const msg=document.getElementById("emailErrorMsg");const input=document.getElementById("userEmail");
  const wrap=input?input.closest(".field"):null;const lab=wrap?wrap.querySelector("label"):null;
  if(show){if(msg)msg.classList.add("show");if(input)input.classList.add("email-invalid-border");if(lab)lab.classList.add("email-invalid-label")}
  else{if(msg)msg.classList.remove("show");if(input)input.classList.remove("email-invalid-border");if(lab)lab.classList.remove("email-invalid-label")}
}
document.getElementById("userEmail").addEventListener("input",()=>{showEmailError(false)});

/* =========================
   PROGRESSIVE REVEAL ENGINE
   ========================= */
const sectionOrder=["age","gender","goal","details","nutrition","diet","ready","results"];
let currentRevealedIndex=0;let resultsShown=false;let lastResultsData=null;
function getSectionEl(name){return document.getElementById("sec-"+name)}

function revealSection(name){
  const el=getSectionEl(name);if(!el)return;
  el.classList.add("visible");
  requestAnimationFrame(()=>{requestAnimationFrame(()=>{el.classList.add("animate-in")})});
  el.scrollIntoView({behavior:"smooth",block:"start"});
  setTimeout(updateNudgeBars,300);
}

function updateProgress(){const bar=document.getElementById("progressBar");const pct=Math.min(100,Math.round((currentRevealedIndex/(sectionOrder.length-1))*100));bar.style.width=pct+"%"}

function isSectionComplete(name){
  const el=getSectionEl(name);if(!el)return false;
  const required=Array.from(el.querySelectorAll("[required]"));
  for(const r of required){
    if(r.type==="hidden"&&(r.id==="bfMin"||r.id==="bfMax"))continue;
    const fieldWrap=r.closest(".field");if(fieldWrap&&fieldWrap.style.display==="none")continue;
    const parentWrap=r.closest("[id$='Wrap']");if(parentWrap&&parentWrap.style.display==="none")continue;
    if(!r.value)return false;
    if(r.type==="email"&&!isValidEmail(r.value))return false;
  }
  if(name==="details"){const tdW=document.getElementById("trainingDetailsWrap");if(tdW&&tdW.style.display!=="none"){const td=document.getElementById("trainingDetails");if(!td.value)return false}}
  if(name==="diet"){const pW=document.getElementById("produceAllergyWrap");if(pW&&pW.style.display!=="none"){const pd=document.getElementById("produceAllergyDetails");if(!pd.value)return false}}
  return true;
}

function tryAdvance(){
  const currentName=sectionOrder[currentRevealedIndex];
  if(currentName==="results"||currentName==="ready")return;
  if(isSectionComplete(currentName)){
    showErrorBanner([]);clearInvalidMarks(getSectionEl(currentName));clearUnansweredHighlights(getSectionEl(currentName));
    const nextIdx=currentRevealedIndex+1;
    if(nextIdx<sectionOrder.length){currentRevealedIndex=nextIdx;updateProgress();revealSection(sectionOrder[nextIdx]);trackToGoogleSheets('in_progress',nextIdx)}
  }
  updateNudgeBars();
}

function attachAutoAdvance(){
  document.querySelectorAll('#quizForm input,#quizForm select,#quizForm textarea').forEach(field=>{
    const handler=()=>{setTimeout(tryAdvance,80)};
    field.addEventListener('change',handler);field.addEventListener('input',debounce(handler,400));
  });
}

/* =========================
   SHOW PLAN BUTTON
   ========================= */
document.getElementById("showPlanBtn").addEventListener("click",()=>{
  showEmailError(false);
  const emailInput=document.getElementById("userEmail");const emailVal=emailInput?emailInput.value.trim():"";
  if(!emailVal||!isValidEmail(emailVal)){
    showEmailError(true);emailInput.scrollIntoView({behavior:"smooth",block:"center"});emailInput.focus({preventScroll:true});
    const nameInput=document.getElementById("firstName");if(nameInput&&!nameInput.value.trim())validateSection("ready");
    return;
  }
  if(!validateSection("ready"))return;
  for(let i=0;i<sectionOrder.indexOf("ready");i++){if(!validateSection(sectionOrder[i])){getSectionEl(sectionOrder[i]).scrollIntoView({behavior:"smooth",block:"start"});return}}
  const form=document.getElementById("quizForm");const fd=new FormData(form);const allergies=fd.getAll("allergies");const data=Object.fromEntries(fd.entries());
  data.allergies=allergies;data.age=Number(data.age);data.heightCm=Number(data.heightCm);data.weightKg=Number(data.weightKg);
  data.bfMin=Number(data.bfMin);data.bfMax=Number(data.bfMax);data.bfRangeLabel=String(data.bfRangeLabel||"");
  if(data.trainingNow==="no")data.sessionsPerWeek="0";
  lastResultsData=data;resultsShown=true;renderResults(data);
  currentRevealedIndex=sectionOrder.length-1;updateProgress();revealSection("results");
  document.getElementById("sec-ready").style.display="none";
});

/* =========================
   DYNAMIC FIELDS
   ========================= */
function setVisible(id,on){const el=document.getElementById(id);if(el)el.style.display=on?"":"none"}
function updateTrainingFields(){
  const tn=document.getElementById("trainingNow").value;const tb=document.getElementById("trainedBefore").value;const tt=document.getElementById("trainingType").value;
  setVisible("trainedBeforeWrap",tn==="no");
  const showType=(tn==="yes")||(tn==="no"&&tb==="yes");setVisible("trainingTypeWrap",showType);
  const showSessions=(tn==="yes");setVisible("sessionsWrap",showSessions);if(!showSessions)document.getElementById("sessionsPerWeek").value="0";
  const showDetails=showType&&(tt==="mixed"||tt==="sport");setVisible("trainingDetailsWrap",showDetails);
  if(!showType){document.getElementById("trainingType").value="";document.getElementById("trainingDetails").value=""}
  if(!showDetails)document.getElementById("trainingDetails").value="";
  setTimeout(updateNudgeBars,100);
}
function updateProduceAllergyField(){
  const allergies=Array.from(document.querySelectorAll('input[name="allergies"]:checked')).map(x=>x.value);
  setVisible("produceAllergyWrap",allergies.includes("fruits")||allergies.includes("vegetables"));
  setTimeout(updateNudgeBars,100);
}
function updateCurrentCalsRequired(){
  const tracks=document.getElementById("tracks").value;const cc=document.getElementById("currentCals");const ccl=cc.closest(".field").querySelector("label");
  if(tracks==="sometimes"||tracks==="yes"){cc.required=true;ccl.setAttribute("data-i18n","s2.currentCals.required");ccl.innerHTML=t("s2.currentCals.required")}
  else{cc.required=false;ccl.setAttribute("data-i18n","s2.currentCals");ccl.innerHTML=t("s2.currentCals")}
  setTimeout(updateNudgeBars,100);
}

document.getElementById("trainingNow").addEventListener("change",()=>{document.getElementById("trainedBefore").value="";document.getElementById("trainingType").value="";document.getElementById("trainingDetails").value="";updateTrainingFields()});
document.getElementById("trainedBefore").addEventListener("change",()=>{document.getElementById("trainingType").value="";document.getElementById("trainingDetails").value="";updateTrainingFields()});
document.getElementById("trainingType").addEventListener("change",()=>{document.getElementById("trainingDetails").value="";updateTrainingFields()});
document.querySelectorAll('input[name="allergies"]').forEach(cb=>{cb.addEventListener("change",updateProduceAllergyField)});
document.getElementById("tracks").addEventListener("change",updateCurrentCalsRequired);
document.getElementById("gender").addEventListener("change",e=>{if(window.__gateBfCardsByGender)window.__gateBfCardsByGender(e.target.value)});

/* =========================
   BODY FAT VISUAL CARDS
   ========================= */
function initBfVisualCards(){
  const grid=document.getElementById("bfGrid"),prompt=document.getElementById("bfPrompt");
  const bfMinEl=document.getElementById("bfMin"),bfMaxEl=document.getElementById("bfMax"),bfLabelEl=document.getElementById("bfRangeLabel");
  if(!grid||!bfMinEl||!bfMaxEl||!bfLabelEl)return;
  const cards=Array.from(grid.querySelectorAll(".bfCard"));
  function clearSelection(){bfMinEl.value="";bfMaxEl.value="";bfLabelEl.value="";cards.forEach(c=>{c.classList.remove("isSelected");c.setAttribute("aria-checked","false")})}
  function setSelection(card){
    bfMinEl.value=String(card.dataset.min||"");bfMaxEl.value=String(card.dataset.max||"");bfLabelEl.value=String(card.dataset.label||"");
    grid.classList.remove("invalidGrid");grid.classList.remove("unanswered");bfMinEl.classList.remove("invalid");bfMaxEl.classList.remove("invalid");bfLabelEl.classList.remove("invalid");
    const wrap=bfMinEl.closest(".field");if(wrap){const lab=wrap.querySelector("label");if(lab){lab.classList.remove("invalid-label");lab.classList.remove("unanswered-label")}}
    cards.forEach(c=>{const on=c===card;c.classList.toggle("isSelected",on);c.setAttribute("aria-checked",on?"true":"false")});
    trackFieldChange();setTimeout(tryAdvance,80);
  }
  function gateByGender(gender){
    const g=(gender==="female")?"female":(gender==="male"?"male":"");
    if(!g){if(prompt)prompt.style.display="";grid.style.display="none"}else{if(prompt)prompt.style.display="none";grid.style.display=""}
    cards.forEach(card=>{card.classList.toggle("isHidden",g?(card.dataset.gender!==g):true)});
    const selected=cards.find(c=>c.classList.contains("isSelected"));if(selected&&g&&selected.dataset.gender!==g)clearSelection();
  }
  cards.forEach(card=>{card.addEventListener("click",()=>setSelection(card));card.addEventListener("keydown",e=>{if(e.key==="Enter"||e.key===" "){e.preventDefault();setSelection(card)}})});
  window.__gateBfCardsByGender=gateByGender;const genderSel=document.getElementById("gender");gateByGender(genderSel?genderSel.value:"");
}

/* =========================
   INIT
   ========================= */
updateTrainingFields();
updateProduceAllergyField();
updateCurrentCalsRequired();
initBfVisualCards();
revealSection(sectionOrder[0]);
updateProgress();
attachAutoAdvance();

const langSelect=document.getElementById("langSelect");
if(langSelect){langSelect.value=getLang();langSelect.addEventListener("change",e=>setLang(e.target.value))}
applyI18n();

// Nudge system
setTimeout(updateNudgeBars,500);
setInterval(updateNudgeBars,2500);

// Sticky
const stickyFloat=document.getElementById("stickyFloat");
if(stickyFloat){stickyFloat.addEventListener("click",()=>{trackCtaClick("kickstart_sticky")})}
</script>
</body>
</html>
